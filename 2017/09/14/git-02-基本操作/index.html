<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>git-02-基本操作 | 宛丘</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">git-02-基本操作</h1><a id="logo" href="/.">宛丘</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/about/"><i class="fa fa-user"> 关于</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">git-02-基本操作</h1><div class="post-meta">Sep 14, 2017<span> | </span><span class="category"><a href="/categories/git/">git</a></span></div><div class="post-content"><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>本篇文章是本人回顾git知识点时从《progit》一书中摘抄出来的笔记，毕竟好记性不如烂笔头嘛，不然我也不会回顾了……<br><strong>另请大神绕路，不喜勿喷……</strong></p>
<hr>
<p><strong>本篇文章先走马观花般地看看git的使用,具体的每条命令的详解请看后续文章</strong></p>
<hr>
<p>本篇文章篇幅比较长，是本人回顾git知识点时从《progit》一书中摘抄出来的笔记，毕竟好记性不如烂笔头嘛，不然我也不会回顾了……<br><strong>另请大神绕路，不喜勿喷……</strong></p>
<h1 id="1-获取git仓库"><a href="#1-获取git仓库" class="headerlink" title="1 获取git仓库"></a>1 获取git仓库</h1><h2 id="1-1-建立空仓库"><a href="#1-1-建立空仓库" class="headerlink" title="1.1 建立空仓库"></a>1.1 建立空仓库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git init &lt;repo-name&gt;</div></pre></td></tr></table></figure>
<h2 id="1-2-将已有目录纳入git仓库"><a href="#1-2-将已有目录纳入git仓库" class="headerlink" title="1.2 将已有目录纳入git仓库"></a>1.2 将已有目录纳入git仓库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ cd some_dir</div><div class="line">$ git init</div></pre></td></tr></table></figure>
<h2 id="1-3-clone现有本地仓库"><a href="#1-3-clone现有本地仓库" class="headerlink" title="1.3 clone现有本地仓库"></a>1.3 clone现有本地仓库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ git clone &lt;location&gt; [new-name]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">$ git init repo-1</div><div class="line">Initialized empty Git repository in G:/tmp/git-tmp/repo-1/.git/</div><div class="line"></div><div class="line"># 克隆仓库repo-1 并重命名为repo-1-clone</div><div class="line"># 也可以不指定别名 但此处若不指定别名会有两个相同名字的仓库而报错</div><div class="line">$ git clone repo-1/ repo-1-clone</div><div class="line">Cloning into &apos;repo-1-clone&apos;...</div><div class="line">warning: You appear to have cloned an empty repository.</div><div class="line">done.</div></pre></td></tr></table></figure>
<h2 id="1-4-clone现有远程仓库"><a href="#1-4-clone现有远程仓库" class="headerlink" title="1.4 clone现有远程仓库"></a>1.4 clone现有远程仓库</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git clone &lt;remote-url&gt; [new-name]</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"># clone远程仓库不指定新仓库名</div><div class="line">$ git clone https://github.com/java-template/jt-808-protocol.git</div><div class="line">Cloning into &apos;jt-808-protocol&apos;...</div><div class="line">remote: Counting objects: 57, done.</div><div class="line">remote: Compressing objects: 100% (47/47), done.</div><div class="line">remote: Total 57 (delta 5), reused 50 (delta 2), pack-reused 0</div><div class="line">Unpacking objects: 100% (57/57), done.</div><div class="line"></div><div class="line"># clone远程仓库并重命名为jt-808-protocol-new</div><div class="line">$ git clone https://github.com/java-template/jt-808-protocol.git jt-808-protocol-new</div><div class="line">Cloning into &apos;jt-808-protocol-new&apos;...</div><div class="line">remote: Counting objects: 57, done.</div><div class="line">remote: Compressing objects: 100% (47/47), done.</div><div class="line">remote: Total 57 (delta 5), reused 50 (delta 2), pack-reused 0</div><div class="line">Unpacking objects: 100% (57/57), done.</div><div class="line"></div><div class="line"># 两个仓库如下</div><div class="line">$ ls</div><div class="line">jt-808-protocol/  jt-808-protocol-new/</div></pre></td></tr></table></figure>
<h1 id="2-记录变更"><a href="#2-记录变更" class="headerlink" title="2 记录变更"></a>2 记录变更</h1><p>初次克隆某个仓库的时候，工作目录中的所有文件都属于已跟踪文件，也是未修改状态。<br>当你修改了文件的内容后，文件的特征码就变了，此时文件处于已修改状态。</p>
<p>来看看《progit》一书中对git文件状态变更的图解：</p>
<p><img src="http://img.blog.csdn.net/20170226005335742?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHlsZXh1cw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="文件状态变更"></p>
<blockquote>
<p>该小节的命令都是在以下的repo-2中操作的：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div></pre></td><td class="code"><pre><div class="line">$ git init git-repo-2</div><div class="line">Initialized empty Git repository in G:/tmp/git-tmp/git-repo-2/.git/</div><div class="line"></div><div class="line">$ cd git-repo-2/</div></pre></td></tr></table></figure>
<h2 id="2-1-git-status"><a href="#2-1-git-status" class="headerlink" title="2.1 git status"></a>2.1 git status</h2><p>该命令可以用来查看文件的状态：已修改，未跟踪等。</p>
<p>新建的仓库，或者刚刚clone过来的仓库都是非常“干净的”。<br>此时使用<code>status</code>命令会显示工作区是<code>clean</code>的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">$ git status</div><div class="line">On branch master</div><div class="line"></div><div class="line">Initial commit</div><div class="line"></div><div class="line">nothing to commit (create/copy files and use &quot;git add&quot; to track)</div></pre></td></tr></table></figure>
<p>默认情况下，<code>git status</code>命令的输出非常多，可以加选项<code>-s</code>或<code>--short</code>来简化输出。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div></pre></td><td class="code"><pre><div class="line"># 添加个新的空白文件index.html</div><div class="line">$ touch.exe index.html</div><div class="line"></div><div class="line">#查看状态</div><div class="line">$ git status</div><div class="line">On branch master</div><div class="line"></div><div class="line">Initial commit</div><div class="line"></div><div class="line">Untracked files: # 未跟踪的文件列表如下</div><div class="line">  (use &quot;git add &lt;file&gt;...&quot; to include in what will be committed)</div><div class="line"></div><div class="line">        index.html</div><div class="line"></div><div class="line">nothing added to commit but untracked files present (use &quot;git add&quot; to track)</div><div class="line"></div><div class="line"></div><div class="line">$ git status -s</div><div class="line">?? index.html</div></pre></td></tr></table></figure>
<p>git status -s 简化输出后，最前面的两个问号表示未跟踪的文件。其他的前缀情况下文。</p>
<blockquote>
<p>git status 前缀说明</p>
</blockquote>
<ul>
<li>??: 新添加的未跟踪文件</li>
<li>A: 新添加到暂存区中的文件</li>
<li>M: 修改过的文件<ul>
<li>出现在右边的 M 表示该文件被修改了但是还没放入暂存区</li>
<li>出现在靠左边的 M 表示该文件被修改了并放入了暂存区</li>
</ul>
</li>
</ul>
<h2 id="2-2-git-add"><a href="#2-2-git-add" class="headerlink" title="2.2 git add"></a>2.2 git add</h2><p>该命令将修改过的文件加入暂存区，待下次提交到历史记录。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div></pre></td><td class="code"><pre><div class="line">$ git add index.html</div><div class="line">$ git status </div><div class="line">On branch master</div><div class="line"></div><div class="line">Initial commit</div><div class="line"></div><div class="line">Changes to be committed:</div><div class="line">  (use &quot;git rm --cached &lt;file&gt;...&quot; to unstage)</div><div class="line"></div><div class="line">	new file:   index.html</div><div class="line"></div><div class="line">$ git status -s</div><div class="line">A  index.html</div><div class="line">$</div></pre></td></tr></table></figure>
<p>git status -s 简化输出后，最前面的A表示新添加到暂存区中的文件。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># 修改文件index.html</div><div class="line">$ echo &quot;hello&quot; &gt;&gt; index.html </div><div class="line"></div><div class="line"># A--在暂存区,M--修改过</div><div class="line">$ git status -s</div><div class="line">AM index.html</div><div class="line">$ git add index.html</div><div class="line">$ git status -s</div><div class="line">A  index.html</div><div class="line">$</div></pre></td></tr></table></figure>
<h2 id="2-3-git-commit"><a href="#2-3-git-commit" class="headerlink" title="2.3 git commit"></a>2.3 git commit</h2><p>该命令将暂存区中待提交的文件提交到历史记录中。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git commit</div><div class="line">git commit -m &quot;some notes&quot;</div></pre></td></tr></table></figure>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">$ git commit -m &quot;first commit&quot;</div><div class="line">[master (root-commit) e500b7a] first commit</div><div class="line"> 2 files changed, 2 insertions(+)</div><div class="line"> create mode 100644 index.html</div><div class="line"> create mode 100644 main.html</div></pre></td></tr></table></figure>
<p>当然，也可以跳过<code>git add</code>这一步，直接将修改的文件加入历史记录。使用选项<code>-a</code>即可。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">git commit -a</div><div class="line">git commit -a -m &quot;some notes&quot;</div></pre></td></tr></table></figure>
<h2 id="2-4-git-rm"><a href="#2-4-git-rm" class="headerlink" title="2.4 git rm"></a>2.4 git rm</h2><p>如果有个已被git管理(跟踪)的文件不想被管理了。<br>那么应该从暂存区中移除它，而后再次提交即可。</p>
<p>而命令<code>git rm</code>就是从暂存区移除文件的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div></pre></td><td class="code"><pre><div class="line">//从暂存区移除main.html</div><div class="line">(master) $ git rm main.html</div><div class="line">rm &apos;main.html&apos;</div><div class="line"></div><div class="line">// D表示已删除</div><div class="line">(master) $ git status -s</div><div class="line">D  main.html</div><div class="line"></div><div class="line">//从暂存区移除后，提交到历史记录</div><div class="line">(master) $ git commit -m &quot;del main.html&quot;</div><div class="line">[master b05b2e9] del main.html</div><div class="line"> 1 file changed, 0 insertions(+), 0 deletions(-)</div><div class="line"> delete mode 100644 main.html</div></pre></td></tr></table></figure>
<p>使用选项<code>-cached</code>可以从历史记录中删除文件。</p>
<h2 id="2-5-gitignore"><a href="#2-5-gitignore" class="headerlink" title="2.5 .gitignore"></a>2.5 .gitignore</h2><p>在实际工作中，往往有些文件我们是不需要提交到历史记录的。</p>
<p>比如：eclipse等IDE产生的工程配置文件.project,.classpath等。</p>
<p>此时，<code>.gitignore</code>文件就派上用场了。在该文件中的内容都是git忽略的文件。<br>只需要在和<code>.git</code>目录同级创建一个名为<code>.gitignore</code>的文件即可。</p>
<p>在该文件中写入文件名、目录名等即可(支持通配符)。<br>以下是该文件中一些特殊的写法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">*.[oa] 		# test.a test.o</div><div class="line">!abc.o 		# 该文件(abc.o)不被忽略</div><div class="line">\!abc.f 	# 此处转义，代表文件名为&quot;!abc.f&quot;的文件被忽略</div><div class="line"></div><div class="line">xyz 	# 文件xyz将被忽略</div><div class="line">xyz/ 	# 录xyz将被忽略</div><div class="line">**/xyz 	# 所有目录下名为xyz的子目录将被忽略</div></pre></td></tr></table></figure>
<h2 id="2-6-git-diff"><a href="#2-6-git-diff" class="headerlink" title="2.6 git diff"></a>2.6 git diff</h2><p>就像《progit》一书中说的，你会经常想：哪些文件以及修改了，但是没有添加到暂存区？哪些文件暂存了，但是没有提交？</p>
<p>此处说的<code>git diff</code>可以用来干这事。它也能比较某个文件在不同版本之间的变更。</p>
<ul>
<li><code>git diff</code> : 工作区和暂存区之间的差异</li>
<li><code>git diff --cached</code> : 暂存区和历史记录之间的差异</li>
<li><code>git diff --staged</code> : 同上</li>
</ul>
<h2 id="2-7-git-tag"><a href="#2-7-git-tag" class="headerlink" title="2.7 git tag"></a>2.7 git tag</h2><p>该命令可以给某个特定的历史提交打上标记，以区分于其他普通的历史提交。</p>
<blockquote>
<p>此处以git的项目仓库作为示例，看看tag的基本操作：</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$ git clone https://github.com/git/git.git</div><div class="line">Cloning into &apos;git&apos;...</div><div class="line">remote: Counting objects: 217337, done.</div><div class="line">remote: Total 217337 (delta 0), reused 0 (delta 0), pack-reused 217337</div><div class="line">Receiving objects: 100% (217337/217337), 78.90 MiB | 893.00 KiB/s, done.</div><div class="line">Resolving deltas: 100% (159424/159424), done.</div><div class="line"></div><div class="line">$ cd git</div></pre></td></tr></table></figure>
<blockquote>
<p>列出标签</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div></pre></td><td class="code"><pre><div class="line"># 列出所有tag</div><div class="line">$ git tag</div><div class="line">gitgui-0.10.0</div><div class="line">gitgui-0.10.1</div><div class="line">gitgui-0.10.2</div><div class="line">gitgui-0.11.0</div><div class="line">……………………</div><div class="line">v2.9.0-rc2</div><div class="line">v2.9.1</div><div class="line">v2.9.2</div><div class="line">v2.9.3</div><div class="line"></div><div class="line"></div><div class="line"># 过滤</div><div class="line">$ git tag -l &apos;v2.9.*&apos;</div><div class="line">v2.9.0</div><div class="line">v2.9.0-rc0</div><div class="line">v2.9.0-rc1</div><div class="line">v2.9.0-rc2</div><div class="line">v2.9.1</div><div class="line">v2.9.2</div><div class="line">v2.9.3</div></pre></td></tr></table></figure>
<blockquote>
<p>标签类型</p>
</blockquote>
<ul>
<li>轻量标签(lightweight):一个特定提交的引用</li>
<li>附注标签(annotated):存储在 Git 数据库中的一个完整对象<ul>
<li>打标签者的名字、电子邮件地址、日期时间</li>
<li>还有一个标签信息</li>
<li>并且可以使用 GNU Privacy Guard（GPG）签名与验证</li>
</ul>
</li>
</ul>
<blockquote>
<p>为当前历史记录创建普通标签</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div></pre></td><td class="code"><pre><div class="line"># 创建普通标签</div><div class="line">$ git tag &apos;my-tag-1&apos;</div><div class="line"></div><div class="line"># 列出标签</div><div class="line">$ git tag -l &apos;my*&apos;</div><div class="line">my-tag-1</div><div class="line"></div><div class="line"># 显示详细信息</div><div class="line">$ git show my-tag-1</div><div class="line">commit 80ba04ed9b07c34af9cc644f2183b3b80fd81744</div><div class="line">Merge: 2076907 22af6fe</div><div class="line">Author: Junio C Hamano &lt;gitster@pobox.com&gt;</div><div class="line">Date:   Mon Feb 20 22:01:59 2017 -0800</div><div class="line"></div><div class="line">    Merge branch &apos;svn-escape-backslash&apos; of git://bogomips.org/git-svn</div><div class="line"></div><div class="line">    * &apos;svn-escape-backslash&apos; of git://bogomips.org/git-svn:</div><div class="line">      git-svn: escape backslashes in refnames</div></pre></td></tr></table></figure>
<blockquote>
<p>为当前历史记录创建附注标签</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line"># 创建附注标签</div><div class="line">$ git tag -a &apos;my-tag-2&apos; -m &apos;my tag 2&apos;</div><div class="line"></div><div class="line">$ git tag -l &apos;my-tag*&apos;</div><div class="line">my-tag-1</div><div class="line">my-tag-2</div><div class="line"></div><div class="line"># 显示内容</div><div class="line">$ git show my-tag-2</div><div class="line">tag my-tag-2</div><div class="line">Tagger: hylexus &lt;hylexus@163.com&gt;</div><div class="line">Date:   Thu Feb 23 16:41:05 2017 +0800</div><div class="line"></div><div class="line">my tag 2 # 此处的信息为创建时指定的-m选项的内容</div><div class="line"></div><div class="line">commit 80ba04ed9b07c34af9cc644f2183b3b80fd81744</div><div class="line">Merge: 2076907 22af6fe</div><div class="line">Author: Junio C Hamano &lt;gitster@pobox.com&gt;</div><div class="line">Date:   Mon Feb 20 22:01:59 2017 -0800</div><div class="line"></div><div class="line">    Merge branch &apos;svn-escape-backslash&apos; of git://bogomips.org/git-svn</div><div class="line"></div><div class="line">    * &apos;svn-escape-backslash&apos; of git://bogomips.org/git-svn:</div><div class="line">      git-svn: escape backslashes in refnames</div></pre></td></tr></table></figure>
<blockquote>
<p>为指定的历史提交创建附注标签</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div></pre></td><td class="code"><pre><div class="line">#为指定的历史提交创建附注标签</div><div class="line"># 显示最近两次的提交</div><div class="line">$ git log --oneline -2</div><div class="line">80ba04e Merge branch &apos;svn-escape-backslash&apos; of git://bogomips.org/git-svn</div><div class="line">2076907 Git 2.12-rc2</div><div class="line"></div><div class="line"># 为倒数第二次历史提交添加附注标签</div><div class="line">$ git tag -a &apos;tag-2-1&apos; 2076907 -m &apos;tag test&apos;</div><div class="line"></div><div class="line"># 查看</div><div class="line">$ git show tag-2-1</div><div class="line">tag tag-2-1</div><div class="line">Tagger: hylexus &lt;hylexus@163.com&gt;</div><div class="line">Date:   Thu Feb 23 16:59:38 2017 +0800</div><div class="line"></div><div class="line">tag test</div><div class="line"></div><div class="line">commit 20769079d22a9f8010232bdf6131918c33a1bf69</div><div class="line">Author: Junio C Hamano &lt;gitster@pobox.com&gt;</div><div class="line">Date:   Fri Feb 17 14:00:19 2017 -0800</div><div class="line"></div><div class="line">    Git 2.12-rc2</div><div class="line"></div><div class="line">    Signed-off-by: Junio C Hamano &lt;gitster@pobox.com&gt;</div></pre></td></tr></table></figure>
<h1 id="3-查看提交历史"><a href="#3-查看提交历史" class="headerlink" title="3 查看提交历史"></a>3 查看提交历史</h1><p>所有的历史提交记录都在<code>.git</code>目录中，可以使用<code>git log</code>来查看历史。</p>
<p>默认情况下,<code>git log</code> 会按提交时间列出所有的更新，最近的更新排在最上面。<br>列出每次提交的SHA-1校验和、作者的名字和电子邮件地址、提交时间以及提交说明。</p>
<p><strong>此处就以《progit》一书中的仓库来做示例：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">$ git clone https://github.com/schacon/simplegit-progit my-pro</div><div class="line">$ cd my-pro</div><div class="line">$ git log</div><div class="line">commit ca82a6dff817ec66f44342007202690a93763949</div><div class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</div><div class="line">Date:   Mon Mar 17 21:52:11 2008 -0700</div><div class="line"></div><div class="line">    changed the verison number</div><div class="line"></div><div class="line">commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7</div><div class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</div><div class="line">Date:   Sat Mar 15 16:40:33 2008 -0700</div><div class="line"></div><div class="line">    removed unnecessary test code</div><div class="line"></div><div class="line">commit a11bef06a3f659402fe7563abf99ad00de2209e6</div><div class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</div><div class="line">Date:   Sat Mar 15 10:31:28 2008 -0700</div><div class="line"></div><div class="line">    first commit</div></pre></td></tr></table></figure>
<blockquote>
<p>git log 常用选项</p>
</blockquote>
<ul>
<li><code>-p</code> : 每次提交的内容差异</li>
<li><code>-n</code> : n是一个正整数,表示只显示最近n次的提交</li>
<li><code>--stat</code> : 显示每次提交的概述性信息</li>
<li><code>--shortstat</code> : 只显示<code>--stat</code>中的最后的统计信息</li>
<li><code>--name-only</code> : 仅在提交信息后显示已修改的文件清单</li>
<li><code>--name-status</code> : 显示新增、修改、删除的文件清单</li>
<li><code>--abbrev-commit</code> : 仅显示SHA-1特征码的前几个字符，而非所有的40个字符</li>
<li><code>--relative-date</code> : 使用较短的相对时间显示(比如，“2 weeks ago”)</li>
<li><code>--pretty</code> : 使用其他格式显示历史提交信息<ul>
<li>oneline</li>
<li>short</li>
<li>full</li>
<li>fuller</li>
<li>format</li>
</ul>
</li>
<li><code>--graph</code> 显示 ASCII 图形表示的分支合并历史</li>
</ul>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div></pre></td><td class="code"><pre><div class="line"># 显示最近两次提交的概述性信息</div><div class="line">$ git log --stat -2</div><div class="line">commit ca82a6dff817ec66f44342007202690a93763949</div><div class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</div><div class="line">Date:   Mon Mar 17 21:52:11 2008 -0700</div><div class="line"></div><div class="line">    changed the verison number</div><div class="line"></div><div class="line"> Rakefile | 2 +-</div><div class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</div><div class="line"></div><div class="line">commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7</div><div class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</div><div class="line">Date:   Sat Mar 15 16:40:33 2008 -0700</div><div class="line"></div><div class="line">    removed unnecessary test code</div><div class="line"></div><div class="line"> lib/simplegit.rb | 5 -----</div><div class="line"> 1 file changed, 5 deletions(-)</div><div class="line"></div><div class="line"></div><div class="line"># 最近两次提交，统计信息</div><div class="line">$ git log --shortstat -2</div><div class="line">commit ca82a6dff817ec66f44342007202690a93763949</div><div class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</div><div class="line">Date:   Mon Mar 17 21:52:11 2008 -0700</div><div class="line"></div><div class="line">    changed the verison number</div><div class="line"></div><div class="line"> 1 file changed, 1 insertion(+), 1 deletion(-)</div><div class="line"></div><div class="line">commit 085bb3bcb608e1e8451d4b2432f8ecbe6306e7e7</div><div class="line">Author: Scott Chacon &lt;schacon@gmail.com&gt;</div><div class="line">Date:   Sat Mar 15 16:40:33 2008 -0700</div><div class="line"></div><div class="line">    removed unnecessary test code</div><div class="line"></div><div class="line"> 1 file changed, 5 deletions(-)</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line">$ git log --graph --all --decorate --oneline</div><div class="line">* ca82a6d (HEAD -&gt; master, origin/master, origin/HEAD) changed the verison number</div><div class="line">* 085bb3b removed unnecessary test code</div><div class="line">* a11bef0 first commit</div><div class="line"></div><div class="line"></div><div class="line">$ git log --pretty=format:&quot;%h - %an, %ar : %s&quot;</div><div class="line">ca82a6d - Scott Chacon, 9 years ago : changed the verison number</div><div class="line">085bb3b - Scott Chacon, 9 years ago : removed unnecessary test code</div><div class="line">a11bef0 - Scott Chacon, 9 years ago : first commit</div></pre></td></tr></table></figure>
<blockquote>
<p>来自《progit》一书中的截图：</p>
</blockquote>
<p><img src="http://img.blog.csdn.net/20170223140322314?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHlsZXh1cw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="pretty"></p>
<p><img src="http://img.blog.csdn.net/20170223140738849?watermark/2/text/aHR0cDovL2Jsb2cuY3Nkbi5uZXQvaHlsZXh1cw==/font/5a6L5L2T/fontsize/400/fill/I0JBQkFCMA==/dissolve/70/gravity/SouthEast" alt="git log limit"></p>
<h1 id="4-撤销操作"><a href="#4-撤销操作" class="headerlink" title="4 撤销操作"></a>4 撤销操作</h1><h2 id="4-1-amend"><a href="#4-1-amend" class="headerlink" title="4.1 amend"></a>4.1 amend</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git commit --amend</div></pre></td></tr></table></figure>
<p>该命令会将暂存区中的文件提交。<br>如果自上次提交以来你还未做任何修改（例如，在上次提交后马上执行了此命令），那么快照会保持不变，而你所修改的只是提交信息。</p>
<p>可以达到覆盖提交注释的目的。</p>
<h2 id="4-2-git-reset"><a href="#4-2-git-reset" class="headerlink" title="4.2 git reset"></a>4.2 git reset</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">$ git status</div><div class="line">On branch master</div><div class="line">Changes to be committed:</div><div class="line">  (use &quot;git reset HEAD &lt;file&gt;...&quot; to unstage)</div><div class="line"></div><div class="line">        modified:   Main.java</div><div class="line">        modified:   index.html</div></pre></td></tr></table></figure>
<p>正如git给你提示的一样：use “git reset HEAD <file>…” to unstage。<br>可以使用 git reset HEAD <file-name-list>来将文件取消暂存。</file-name-list></file></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div></pre></td><td class="code"><pre><div class="line">$ git reset HEAD Main.java index.html</div><div class="line">Unstaged changes after reset:</div><div class="line">M       Main.java</div><div class="line">M       index.html</div><div class="line"></div><div class="line">$ git status</div><div class="line">On branch master</div><div class="line">Changes not staged for commit:</div><div class="line">  (use &quot;git add &lt;file&gt;...&quot; to update what will be committed)</div><div class="line">  (use &quot;git checkout -- &lt;file&gt;...&quot; to discard changes in working directory)</div><div class="line"></div><div class="line">        modified:   Main.java</div><div class="line">        modified:   index.html</div><div class="line"></div><div class="line">no changes added to commit (use &quot;git add&quot; and/or &quot;git commit -a&quot;)</div></pre></td></tr></table></figure>
<h2 id="4-3-checkout-–-file"><a href="#4-3-checkout-–-file" class="headerlink" title="4.3 checkout – file"></a>4.3 checkout – file</h2><figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">git checkout -- file</div></pre></td></tr></table></figure>
<p>该命令可以将文件还原成上次提交时的样子。</p>
<blockquote>
<p>reset 和 git checkout – file的区别</p>
</blockquote>
<p>简言之，<code>git checkout -- file</code>修改工作区，而<code>git reset</code>修改的是暂存区。</p>
<h1 id="5-别名"><a href="#5-别名" class="headerlink" title="5 别名"></a>5 别名</h1><p>和<code>linux</code>的<code>shell</code>命令一样,你可以给git命令起简短的别名以方便使用。</p>
<blockquote>
<p>linux bash命令别名</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">$ alias ll=&apos;ls -a -l&apos;</div></pre></td></tr></table></figure>
<p>此时<code>ll</code>就和<code>ls -a -l</code>一样了。</p>
<blockquote>
<p>git 别名示例</p>
</blockquote>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">$ git config --global alias.lol &apos;log --decorate --graph --all --oneline&apos;</div><div class="line">$ git config --global alias.ci commit</div></pre></td></tr></table></figure>
<p>现在，就可以使用<code>git ci</code>来代替<code>git commit</code>了。</p>
<p>其实，和<code>linux系统</code>一样，git所有的配置都是在配置文件里的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div></pre></td><td class="code"><pre><div class="line"># global级别的配置文件内容如下</div><div class="line">$ cat ~/.gitconfig</div><div class="line">[user]</div><div class="line">        name = hylexus</div><div class="line">        email = hylexus@163.com</div><div class="line">[alias]</div><div class="line">        lol = log --decorate --graph --all --oneline</div><div class="line">        ci = commit</div><div class="line">[credential]</div><div class="line">        helper = manager</div></pre></td></tr></table></figure>
<h1 id="参考资料"><a href="#参考资料" class="headerlink" title="参考资料"></a>参考资料</h1><ul>
<li>《progit》</li>
</ul>
</div><div class="tags"><a href="/tags/git/">git</a></div><div class="post-nav"><a href="/2017/09/14/git-01-简介、安装和配置/" class="pre">git-01-简介、安装和配置</a><a href="/2017/09/14/git-03-分支/" class="next">git-03-分支</a></div></div></div></div><div class="pure-u-1-4 hidden_mid_and_down"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/99-problems-in-scala/">99-problems-in-scala</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JVM/">JVM</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-多线程/">Java-多线程</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaSE/">JavaSE</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LeetCode/">LeetCode</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NIO/">NIO</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/app-server/">app-server</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/http-server/">http-server</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/kafka/">kafka</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/logging/">logging</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/maven/">maven</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/scala/">scala</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spark/">spark</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring-cloud/">spring-cloud</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/zookeeper/">zookeeper</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/安全/">安全</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/排序/">排序</a><span class="category-list-count">1</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/JVM/" style="font-size: 15px;">JVM</a> <a href="/tags/NIO/" style="font-size: 15px;">NIO</a> <a href="/tags/LeetCode/" style="font-size: 15px;">LeetCode</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/apache-httpd/" style="font-size: 15px;">apache/httpd</a> <a href="/tags/lambda/" style="font-size: 15px;">lambda</a> <a href="/tags/bit/" style="font-size: 15px;">bit</a> <a href="/tags/keytool/" style="font-size: 15px;">keytool</a> <a href="/tags/非对称加密/" style="font-size: 15px;">非对称加密</a> <a href="/tags/kafka/" style="font-size: 15px;">kafka</a> <a href="/tags/jt-808/" style="font-size: 15px;">jt-808</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/logging/" style="font-size: 15px;">logging</a> <a href="/tags/scala/" style="font-size: 15px;">scala</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/安全/" style="font-size: 15px;">安全</a> <a href="/tags/spark/" style="font-size: 15px;">spark</a> <a href="/tags/spring-cloud/" style="font-size: 15px;">spring-cloud</a> <a href="/tags/ssh/" style="font-size: 15px;">ssh</a> <a href="/tags/tomcat/" style="font-size: 15px;">tomcat</a> <a href="/tags/zookeeper/" style="font-size: 15px;">zookeeper</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/排序/" style="font-size: 15px;">排序</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/java多线程-01-基本概念/">java多线程-01-基本概念</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/排序算法-01-冒泡排序/">排序算法-01-冒泡排序排序算法-01-冒泡排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/git-01-简介、安装和配置/">git-01-简介、安装和配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/git-02-基本操作/">git-02-基本操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/git-03-分支/">git-03-分支</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/shiro-常用filter/">shiro-常用filter</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/problem01-05/">problem01-05</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/java秘钥、证书管理工具-keytool/">java秘钥、证书管理工具-keytool</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/docker筑基篇-00-docker简介/">docker筑基篇-00-docker简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/httpd系列-00-安装/">httpd系列-00-安装</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://www.example1.com/" title="site-name1" target="_blank">site-name1</a><ul></ul><a href="http://www.example2.com/" title="site-name2" target="_blank">site-name2</a><ul></ul><a href="http://www.example3.com/" title="site-name3" target="_blank">site-name3</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">宛丘.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>
<!DOCTYPE html><html lang="zh-CN"><head><meta http-equiv="content-type" content="text/html; charset=utf-8"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black-translucent" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="description"><title>redis-04-配置文件 | 宛丘</title><link rel="stylesheet" type="text/css" href="/css/style.css?v=0.0.0"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/normalize/7.0.0/normalize.min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/pure-min.css"><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/pure/1.0.0/grids-responsive-min.css"><link rel="stylesheet" href="//cdn.bootcss.com/font-awesome/4.7.0/css/font-awesome.min.css"><script type="text/javascript" src="//cdn.bootcss.com/jquery/3.2.1/jquery.min.js"></script><link rel="Shortcut Icon" type="image/x-icon" href="/favicon.ico"><link rel="apple-touch-icon" href="/apple-touch-icon.png"><link rel="apple-touch-icon-precomposed" href="/apple-touch-icon.png"></head><body><div class="body_container"><div id="header"><div class="site-name"><h1 class="hidden">redis-04-配置文件</h1><a id="logo" href="/.">宛丘</a><p class="description"></p></div><div id="nav-menu"><a href="/." class="current"><i class="fa fa-home"> 首页</i></a><a href="/archives/"><i class="fa fa-archive"> 归档</i></a><a href="/timeline/"><i class="fa fa-user"> timeline</i></a></div></div><div id="layout" class="pure-g"><div class="pure-u-1 pure-u-md-3-4"><div class="content_container"><div class="post"><h1 class="post-title">redis-04-配置文件</h1><div class="post-meta">Mar 26, 2017<span> | </span><span class="category"><a href="/categories/redis/">redis</a></span></div><a data-disqus-identifier="2017/03/26/redis-04-配置文件/" href="/2017/03/26/redis-04-配置文件/#disqus_thread" class="disqus-comment-count"></a><div class="post-content"><h1 id="说明"><a href="#说明" class="headerlink" title="说明"></a>说明</h1><p>先写个常用的,其他的以后用到在翻译吧……</p>
<p>欢迎纠错。</p>
<h1 id="1-关于redis配置文件的说明"><a href="#1-关于redis配置文件的说明" class="headerlink" title="1 关于redis配置文件的说明"></a>1 关于redis配置文件的说明</h1><h2 id="1-1-位置"><a href="#1-1-位置" class="headerlink" title="1.1 位置"></a>1.1 位置</h2><p>理论上来讲，配置的位置可以随意放置。</p>
<p>在<code>redis</code>启动的时候将配置文件的路径当做<code>第一个参数</code>传递给redis-server即可。</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line">./redis-server /path/to/redis.conf</div></pre></td></tr></table></figure>
<h2 id="1-2-内存单位"><a href="#1-2-内存单位" class="headerlink" title="1.2 内存单位"></a>1.2 内存单位</h2><ul>
<li>内存单位大小写不敏感</li>
<li>但是<code>k</code>和<code>kb</code>,<code>g</code>和<code>gb</code>是不同的</li>
</ul>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">1k =&gt; 1000 bytes</div><div class="line">1kb =&gt; 1024 bytes</div><div class="line">1m =&gt; 1000000 bytes</div><div class="line">1mb =&gt; 1024*1024 bytes</div><div class="line">1g =&gt; 1000000000 bytes</div><div class="line">1gb =&gt; 1024*1024*1024 bytes</div></pre></td></tr></table></figure>
<h1 id="2-GENERAL-常规配置"><a href="#2-GENERAL-常规配置" class="headerlink" title="2 GENERAL-常规配置"></a>2 GENERAL-常规配置</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################ GENERAL #####################################</span></span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 默认为no. </span></div><div class="line"><span class="meta">#</span><span class="bash"> 是否以守护进程的方式运行redis.</span></div><div class="line">daemonize yes </div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> redis的进程描述符文件</span></div><div class="line"><span class="meta">#</span><span class="bash"> 启动的时候会在该位置创建文件,停止的时候会删除该文件.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 如果redis不是以守护进程的方式运行，同时如果没有指定<span class="string">'pidfile'</span>，则不会创建该文件。</span></div><div class="line"><span class="meta">#</span><span class="bash"> 如果redis是以守护进程的方式运行的，即使是没有指定<span class="string">'pidfile'</span>,也会创建该进程描述符文件，默认位置为:<span class="string">"/var/run/redis.pid"</span>.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> redis会尽力创建pid文件: 如果Redis创建pidfile失败了，也不会有其他不良影响，redis会正常启动运行。</span></div><div class="line">pidfile /var/run/redis_6379.pid</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> If you run Redis from upstart or systemd, Redis can interact with your</span></div><div class="line"><span class="meta">#</span><span class="bash"> supervision tree. Options:</span></div><div class="line"><span class="meta">#</span><span class="bash">   supervised no      - no supervision interaction</span></div><div class="line"><span class="meta">#</span><span class="bash">   supervised upstart - signal upstart by putting Redis into SIGSTOP mode</span></div><div class="line"><span class="meta">#</span><span class="bash">   supervised systemd - signal systemd by writing READY=1 to <span class="variable">$NOTIFY_SOCKET</span></span></div><div class="line"><span class="meta">#</span><span class="bash">   supervised auto    - detect upstart or systemd method based on</span></div><div class="line"><span class="meta">#</span><span class="bash">                        UPSTART_JOB or NOTIFY_SOCKET environment variables</span></div><div class="line"><span class="meta">#</span><span class="bash"> Note: these supervision methods only signal <span class="string">"process is ready."</span></span></div><div class="line"><span class="meta">#</span><span class="bash">       They <span class="keyword">do</span> not <span class="built_in">enable</span> continuous liveness pings back to your supervisor.</span></div><div class="line">supervised no</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 指定日志级别</span></div><div class="line"><span class="meta">#</span><span class="bash"> 可取值如下:</span></div><div class="line"><span class="meta">#</span><span class="bash"> debug (a lot of information, useful <span class="keyword">for</span> development/testing)</span></div><div class="line"><span class="meta">#</span><span class="bash"> verbose (many rarely useful info, but not a mess like the debug level)</span></div><div class="line"><span class="meta">#</span><span class="bash"> notice (moderately verbose, what you want <span class="keyword">in</span> production probably)</span></div><div class="line"><span class="meta">#</span><span class="bash"> warning (only very important / critical messages are logged)</span></div><div class="line">loglevel notice</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 指定日志文件名. </span></div><div class="line"><span class="meta">#</span><span class="bash"> 在该值为空字符串的情况下：</span></div><div class="line"><span class="meta">#</span><span class="bash">	1)  如果redis不是以后台进程的方式运行，日志会在标准输出设备上输出</span></div><div class="line"><span class="meta">#</span><span class="bash">	2)	如果redi是一个后台进程的方式运行的，日志会被送到设备文件/dev/null</span></div><div class="line">logfile ""</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 是否启用系统日志,如要启用改项,将值置为yes即可.</span></div><div class="line"><span class="meta">#</span><span class="bash"> syslog-enabled no</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 指定系统日志的前缀(redis.log).</span></div><div class="line"><span class="meta">#</span><span class="bash"> syslog-ident redis</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 指定syslog设备，值可以是USER或LOCAL0-LOCAL7</span></div><div class="line"><span class="meta">#</span><span class="bash"> syslog-facility local0</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 设置数据库的数量. 默认的数据库是0号库.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 可以使用SELECT &lt;dbid&gt;来切换到对应的数据库,dbid 是一个0到<span class="string">'databases'</span>-1的数字.</span></div><div class="line">databases 16</div></pre></td></tr></table></figure>
<h1 id="3-NETWORK"><a href="#3-NETWORK" class="headerlink" title="3 NETWORK"></a>3 NETWORK</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################# NETWORK #####################################</span></span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 默认情况下,如果没有配置<span class="built_in">bind</span>指令,Redis将监听在服务器所有可用的网络地址上.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 可以使用<span class="built_in">bind</span>指令来指定Redis监听在一个或多个特定的网络地址上.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 示例:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">bind</span> 192.168.1.100 10.0.0.1</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">bind</span> 127.0.0.1 ::1</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> ~~~ WARNING ~~~ </span></div><div class="line"><span class="meta">#</span><span class="bash"> 如果运行Redis的服务器是直接暴露在Internet上的,绑定所有网络地址是很危险的,并且会将Redis实例暴露给Internet上的所有人. </span></div><div class="line"><span class="meta">#</span><span class="bash"> 所以,推荐你取消下面的bidn指令的注释,以强制使Redis监听在IPV4的本地回环地址(127.0.0.1).</span></div><div class="line"><span class="meta">#</span><span class="bash"> 这也就意味着Redis将只接受来自运行Redis服务的同一台电脑上的客户端的连接.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line">bind 127.0.0.1</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Protected mode 是一层安全保护层, <span class="keyword">in</span> order to avoid that</span></div><div class="line"><span class="meta">#</span><span class="bash"> Redis instances left open on the internet are accessed and exploited.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 当 protected mode 开启时如果:</span></div><div class="line"><span class="meta">#</span><span class="bash"> 1) 如果Redis服务没有用<span class="built_in">bind</span>指令明确指定一些列绑定的IP地址.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 2) 没有配置密码.</span></div><div class="line"><span class="meta">#</span><span class="bash"> Redis将仅仅接受来自IPV4和IPV6的本地回环地址127.0.0.1和::1,还有Unix domain sockets的客户端连接.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 默认情况下protected mode是启用的.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 如果你确定即使是在你没有配置密码验证也没有用<span class="built_in">bind</span>指令明确指定Redis监听的网络地址的情况下,</span></div><div class="line"><span class="meta">#</span><span class="bash"> 你也想来自其他主机的客户端连接Redis,你可以禁用该选项.</span></div><div class="line">protected-mode yes</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 默认端口为6379</span></div><div class="line"><span class="meta">#</span><span class="bash"> If port 0 is specified Redis will not listen on a TCP socket.</span></div><div class="line">port 6379</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> TCP listen() backlog.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 在高并发的环境下需要将该值调大以避免客户端连接缓慢的问题.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 但是在Linux环境下,Linux内核将默默地将该值改变成/proc/sys/net/core/somaxconn的值.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 所以要使该值生效,你还得同时更改somaxconn的值.</span></div><div class="line">tcp-backlog 511</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Unix socket.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Specify the path <span class="keyword">for</span> the Unix socket that will be used to listen <span class="keyword">for</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> incoming connections. There is no default, so Redis will not listen</span></div><div class="line"><span class="meta">#</span><span class="bash"> on a unix socket when not specified.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> unixsocket /tmp/redis.sock</span></div><div class="line"><span class="meta">#</span><span class="bash"> unixsocketperm 700</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 处于idle状态的客户端的超时时间(多少秒后端口该类<span class="string">"发呆"</span>的客户端连接)</span></div><div class="line"><span class="meta">#</span><span class="bash"> 0表示禁用该功能</span></div><div class="line">timeout 0</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> TCP keepalive.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 如果设置为一个非零值,在通信不稳定时会使用SO_KEEPALIVE发送TCP确认报文.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 原因如下:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 1) 探测已经<span class="string">"死亡的"</span>(断开的)通信链路.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 2) 从网络设备的角度确保连接还<span class="string">"活着"</span>.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 在Linux上,指定的这个值(秒)将是发送ACK的时间间隔.</span></div><div class="line">tcp-keepalive 300</div></pre></td></tr></table></figure>
<h1 id="4-SNAPSHOTTING"><a href="#4-SNAPSHOTTING" class="headerlink" title="4 SNAPSHOTTING"></a>4 SNAPSHOTTING</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################### SNAPSHOTTING  ################################</span></span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 将数据保存到磁盘:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">   save &lt;seconds&gt; &lt;changes&gt;</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">   当指定的秒数(seconds)和写操作的次数(changes)都满足的时候将会触发save操作.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">   比如以下三种情况将会触发save操作:</span></div><div class="line"><span class="meta">#</span><span class="bash">   after 900 sec --(15 min) 15分钟内至少有一个key改变</span></div><div class="line"><span class="meta">#</span><span class="bash">   after 300 sec --(5 min) 5分钟内至少10个key改变</span></div><div class="line"><span class="meta">#</span><span class="bash">   after 60 sec --60秒内至少10000个key改变</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">   Note: 可以注释掉所有save开头的行来彻底禁用save操作.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">   也可以添加一个值为空字符串的save指令来去除预先设定的一些save配置,比如像下面这样:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">   save <span class="string">""</span></span></div><div class="line"></div><div class="line">save 900 1</div><div class="line">save 300 10</div><div class="line">save 60 10000</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 默认情况下,如果启用了RDB快照(至少有一个保存点)并且最近一次的备份操作失败了,Redis将停止处理写操作.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 这样做是为了让用户意识到数据的持久化发生了异常.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 如果后台的备份进程再次恢复正常,Redis将会继续处理写操作.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 当然,你也可以禁用这个特性.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 也就是说在磁盘异常,权限不足等原因导致save进程无法正常工作时可以继续处理写操作.指令如下:</span></div><div class="line">stop-writes-on-bgsave-error yes</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 是否对.rdb文件使用LZF进行压缩?</span></div><div class="line"><span class="meta">#</span><span class="bash"> 默认情况下,该特性是启用的.并且几乎总是有用的.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 如果你想节省CPU资源可以将该项置为no,当然同时数据文件的体积也会更大.</span></div><div class="line">rdbcompression yes</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 从第5版开始,在rdb文件的末尾会有一个CRC64校验和.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 当然这会影响性能,可以关闭该特性以最大化Redis的性能.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line">rdbchecksum yes</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 备份文件的文件名</span></div><div class="line">dbfilename dump.rdb</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 工作目录.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 以`dbfilename`指定的值为文件名(比如dump.rdb)的数据库文件将被存储在该指令(dir)指定的目录中.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> AOF文件也会被在此处被创建.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 请注意:必须指定一个目录,而不是一个文件名.</span></div><div class="line">dir ./</div></pre></td></tr></table></figure>
<h1 id="5-REPLICATION"><a href="#5-REPLICATION" class="headerlink" title="5 REPLICATION"></a>5 REPLICATION</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div><div class="line">146</div><div class="line">147</div><div class="line">148</div><div class="line">149</div><div class="line">150</div><div class="line">151</div><div class="line">152</div><div class="line">153</div><div class="line">154</div><div class="line">155</div><div class="line">156</div><div class="line">157</div><div class="line">158</div><div class="line">159</div><div class="line">160</div><div class="line">161</div><div class="line">162</div><div class="line">163</div><div class="line">164</div><div class="line">165</div><div class="line">166</div><div class="line">167</div><div class="line">168</div><div class="line">169</div><div class="line">170</div><div class="line">171</div><div class="line">172</div><div class="line">173</div><div class="line">174</div><div class="line">175</div><div class="line">176</div><div class="line">177</div><div class="line">178</div><div class="line">179</div><div class="line">180</div><div class="line">181</div><div class="line">182</div><div class="line">183</div><div class="line">184</div><div class="line">185</div><div class="line">186</div><div class="line">187</div><div class="line">188</div><div class="line">189</div><div class="line">190</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################ REPLICATION #################################</span></span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 主从复制. 用 slaveof 命令可以是一个Redis实例成为另一个Redis实例的备份. </span></div><div class="line"><span class="meta">#</span><span class="bash"> 以下是一些关于主从复制的知识点:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 1) Redis的复制是异步的,当某个主机(master)的备机(slave)数量达不到一个最小值时, </span></div><div class="line"><span class="meta">#</span><span class="bash">	 你可以配置主机(master)停止接受写请求.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 2) Redis slaves are able to perform a partial resynchronization with the</span></div><div class="line"><span class="meta">#</span><span class="bash">    master <span class="keyword">if</span> the replication link is lost <span class="keyword">for</span> a relatively small amount of</span></div><div class="line"><span class="meta">#</span><span class="bash">    time. You may want to configure the replication backlog size (see the next</span></div><div class="line"><span class="meta">#</span><span class="bash">    sections of this file) with a sensible value depending on your needs.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 3) 备份是自动的并且不需要用户交互的.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> slaveof &lt;masterip&gt; &lt;masterport&gt;</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 主机(master)的密码保护设置</span></div><div class="line"><span class="meta">#</span><span class="bash"> masterauth &lt;master-password&gt;</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 当某个备机(slave)失去了和主机(master)的连接,或者备份进程仍在运行中,备机(slave)可以有如下两种表现:</span></div><div class="line"><span class="meta">#</span><span class="bash"> 1) 如果slave-serve-stale-data被置为<span class="string">'yes'</span>(默认值)备机(slave)将继续回应客户端请求, </span></div><div class="line"><span class="meta">#</span><span class="bash">	 返回给客户端的数据可能是过时的,或者是空的.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 2) 如果slave-serve-stale-data被置为<span class="string">'no'</span>,</span></div><div class="line"><span class="meta">#</span><span class="bash">	 备机(slave)将回复给客户端一个<span class="string">"SYNC with master in progress"</span>的错误.</span></div><div class="line">slave-serve-stale-data yes</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 你可以配置一个备机是否接受写请求.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 对一个备机写数据在保存一些临时数据的时候可能会有用(对salve的写操作会在一次主从同步后被覆盖掉).</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 从Redis 2.6 开始salve默认是只读的.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line">slave-read-only yes</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 主从同步策略: disk or socket.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> -------------------------------------------------------</span></div><div class="line"><span class="meta">#</span><span class="bash"> WARNING: DISKLESS 备份策略目前尚处于实验阶段(redis-3.2.8)</span></div><div class="line"><span class="meta">#</span><span class="bash"> -------------------------------------------------------</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> New slaves and reconnecting slaves that are not able to <span class="built_in">continue</span> the replication</span></div><div class="line"><span class="meta">#</span><span class="bash"> process just receiving differences, need to <span class="keyword">do</span> what is called a <span class="string">"full</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> synchronization<span class="string">". An RDB file is transmitted from the master to the slaves.</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> The transmission can happen <span class="keyword">in</span> two different ways:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 1) Disk-backed: The Redis master creates a new process that writes the RDB</span></div><div class="line"><span class="meta">#</span><span class="bash">                 file on disk. Later the file is transferred by the parent</span></div><div class="line"><span class="meta">#</span><span class="bash">                 process to the slaves incrementally.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 2) Diskless: The Redis master creates a new process that directly writes the</span></div><div class="line"><span class="meta">#</span><span class="bash">              RDB file to slave sockets, without touching the disk at all.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> With disk-backed replication, <span class="keyword">while</span> the RDB file is generated, more slaves</span></div><div class="line"><span class="meta">#</span><span class="bash"> can be queued and served with the RDB file as soon as the current child producing</span></div><div class="line"><span class="meta">#</span><span class="bash"> the RDB file finishes its work. With diskless replication instead once</span></div><div class="line"><span class="meta">#</span><span class="bash"> the transfer starts, new slaves arriving will be queued and a new transfer</span></div><div class="line"><span class="meta">#</span><span class="bash"> will start when the current one terminates.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> When diskless replication is used, the master waits a configurable amount of</span></div><div class="line"><span class="meta">#</span><span class="bash"> time (<span class="keyword">in</span> seconds) before starting the transfer <span class="keyword">in</span> the hope that multiple slaves</span></div><div class="line"><span class="meta">#</span><span class="bash"> will arrive and the transfer can be parallelized.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> With slow disks and fast (large bandwidth) networks, diskless replication</span></div><div class="line"><span class="meta">#</span><span class="bash"> works better.</span></div><div class="line">repl-diskless-sync no</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> When diskless replication is enabled, it is possible to configure the delay</span></div><div class="line"><span class="meta">#</span><span class="bash"> the server waits <span class="keyword">in</span> order to spawn the child that transfers the RDB via socket</span></div><div class="line"><span class="meta">#</span><span class="bash"> to the slaves.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> This is important since once the transfer starts, it is not possible to serve</span></div><div class="line"><span class="meta">#</span><span class="bash"> new slaves arriving, that will be queued <span class="keyword">for</span> the next RDB transfer, so the server</span></div><div class="line"><span class="meta">#</span><span class="bash"> waits a delay <span class="keyword">in</span> order to <span class="built_in">let</span> more slaves arrive.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> The delay is specified <span class="keyword">in</span> seconds, and by default is 5 seconds. To <span class="built_in">disable</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> it entirely just <span class="built_in">set</span> it to 0 seconds and the transfer will start ASAP.</span></div><div class="line">repl-diskless-sync-delay 5</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Slaves send PINGs to server <span class="keyword">in</span> a predefined interval. It<span class="string">'s possible to change</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> this interval with the repl_ping_slave_period option. The default value is 10</span></div><div class="line"><span class="meta">#</span><span class="bash"> seconds.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> repl-ping-slave-period 10</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> The following option sets the replication timeout <span class="keyword">for</span>:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 1) Bulk transfer I/O during SYNC, from the point of view of slave.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 2) Master timeout from the point of view of slaves (data, pings).</span></div><div class="line"><span class="meta">#</span><span class="bash"> 3) Slave timeout from the point of view of masters (REPLCONF ACK pings).</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> It is important to make sure that this value is greater than the value</span></div><div class="line"><span class="meta">#</span><span class="bash"> specified <span class="keyword">for</span> repl-ping-slave-period otherwise a timeout will be detected</span></div><div class="line"><span class="meta">#</span><span class="bash"> every time there is low traffic between the master and the slave.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> repl-timeout 60</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Disable TCP_NODELAY on the slave socket after SYNC?</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> If you select <span class="string">"yes"</span> Redis will use a smaller number of TCP packets and</span></div><div class="line"><span class="meta">#</span><span class="bash"> less bandwidth to send data to slaves. But this can add a delay <span class="keyword">for</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> the data to appear on the slave side, up to 40 milliseconds with</span></div><div class="line"><span class="meta">#</span><span class="bash"> Linux kernels using a default configuration.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> If you select <span class="string">"no"</span> the delay <span class="keyword">for</span> data to appear on the slave side will</span></div><div class="line"><span class="meta">#</span><span class="bash"> be reduced but more bandwidth will be used <span class="keyword">for</span> replication.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> By default we optimize <span class="keyword">for</span> low latency, but <span class="keyword">in</span> very high traffic conditions</span></div><div class="line"><span class="meta">#</span><span class="bash"> or when the master and slaves are many hops away, turning this to <span class="string">"yes"</span> may</span></div><div class="line"><span class="meta">#</span><span class="bash"> be a good idea.</span></div><div class="line">repl-disable-tcp-nodelay no</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Set the replication backlog size. The backlog is a buffer that accumulates</span></div><div class="line"><span class="meta">#</span><span class="bash"> slave data when slaves are disconnected <span class="keyword">for</span> some time, so that when a slave</span></div><div class="line"><span class="meta">#</span><span class="bash"> wants to reconnect again, often a full resync is not needed, but a partial</span></div><div class="line"><span class="meta">#</span><span class="bash"> resync is enough, just passing the portion of data the slave missed <span class="keyword">while</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> disconnected.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> The bigger the replication backlog, the longer the time the slave can be</span></div><div class="line"><span class="meta">#</span><span class="bash"> disconnected and later be able to perform a partial resynchronization.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> The backlog is only allocated once there is at least a slave connected.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> repl-backlog-size 1mb</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> After a master has no longer connected slaves <span class="keyword">for</span> some time, the backlog</span></div><div class="line"><span class="meta">#</span><span class="bash"> will be freed. The following option configures the amount of seconds that</span></div><div class="line"><span class="meta">#</span><span class="bash"> need to elapse, starting from the time the last slave disconnected, <span class="keyword">for</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> the backlog buffer to be freed.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> A value of 0 means to never release the backlog.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> repl-backlog-ttl 3600</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 备机的优先级是一个整数.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 它是给哨兵模式使用的(当master工作不正常时哨兵模式将选一个slave作为master.</span></div><div class="line"><span class="meta">#</span><span class="bash"> </span></div><div class="line"><span class="meta">#</span><span class="bash"> 优先级值越小越先会被考虑,比如三个salve的优先级为10, 100, 25.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 哨兵将会选择优先级值最小的10.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 但是,如果0这个特殊值被指定的话表示该slave将不会参加master选举.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 默认的优先级为 100.</span></div><div class="line">slave-priority 100</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> It is possible <span class="keyword">for</span> a master to stop accepting writes <span class="keyword">if</span> there are less than</span></div><div class="line"><span class="meta">#</span><span class="bash"> N slaves connected, having a lag less or equal than M seconds.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 对于一个master来说当他的slave数量在M秒小于等于N的时候可以停止接受写操作.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 这 N 个slaves指的是 <span class="string">"online"</span> 状态的.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> The lag <span class="keyword">in</span> seconds, that must be &lt;= the specified value, is calculated from</span></div><div class="line"><span class="meta">#</span><span class="bash"> the last ping received from the slave, that is usually sent every second.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> This option does not GUARANTEE that N replicas will accept the write, but</span></div><div class="line"><span class="meta">#</span><span class="bash"> will <span class="built_in">limit</span> the window of exposure <span class="keyword">for</span> lost writes <span class="keyword">in</span> <span class="keyword">case</span> not enough slaves</span></div><div class="line"><span class="meta">#</span><span class="bash"> are available, to the specified number of seconds.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> For example to require at least 3 slaves with a lag &lt;= 10 seconds use:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> min-slaves-to-write 3</span></div><div class="line"><span class="meta">#</span><span class="bash"> min-slaves-max-lag 10</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Setting one or the other to 0 disables the feature.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> By default min-slaves-to-write is <span class="built_in">set</span> to 0 (feature disabled) and</span></div><div class="line"><span class="meta">#</span><span class="bash"> min-slaves-max-lag is <span class="built_in">set</span> to 10.</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Redis主机(master)可以通过不同的方式来列出连接到它的备机(slave)的IP和端口.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 比如 <span class="string">"INFO replication"</span> 可以列出这些信息.</span></div><div class="line"><span class="meta">#</span><span class="bash"> Redis 哨兵可以通过其他途径来获取相应的信息已发现slave实例.比如<span class="string">'role'</span>命令.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> The listed IP and address normally reported by a slave is obtained</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> the following way:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">   IP: The address is auto detected by checking the peer address</span></div><div class="line"><span class="meta">#</span><span class="bash">   of the socket used by the slave to connect with the master.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">   Port: The port is communicated by the slave during the replication</span></div><div class="line"><span class="meta">#</span><span class="bash">   handshake, and is normally the port that the slave is using to</span></div><div class="line"><span class="meta">#</span><span class="bash">   list <span class="keyword">for</span> connections.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> However when port forwarding or Network Address Translation (NAT) is</span></div><div class="line"><span class="meta">#</span><span class="bash"> used, the slave may be actually reachable via different IP and port</span></div><div class="line"><span class="meta">#</span><span class="bash"> pairs. The following two options can be used by a slave <span class="keyword">in</span> order to</span></div><div class="line"><span class="meta">#</span><span class="bash"> report to its master a specific <span class="built_in">set</span> of IP and port, so that both INFO</span></div><div class="line"><span class="meta">#</span><span class="bash"> and ROLE will report those values.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> There is no need to use both the options <span class="keyword">if</span> you need to override just</span></div><div class="line"><span class="meta">#</span><span class="bash"> the port or the IP address.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> slave-announce-ip 5.5.5.5</span></div><div class="line"><span class="meta">#</span><span class="bash"> slave-announce-port 1234</span></div></pre></td></tr></table></figure>
<h1 id="6-SECURITY"><a href="#6-SECURITY" class="headerlink" title="6 SECURITY"></a>6 SECURITY</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################# SECURITY ###################################</span></span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 在Redis处理其他命令前,要求客户端使用 AUTH &lt;PASSWORD&gt; 来验证身份.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 如果你不信任访问运行redis-server的其他访问者的情况下,该项可能会有用.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> requirepass foobared</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 命令重命名.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 在一个共享的环境中,可以给命令重命名.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 比如 CONFIG 命令可以被重命名为一些很难猜到的新名称.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 示例:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> rename-command CONFIG b840fc02d524045429941cc15f59e41cb7be6c52</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 可以将一个命令重命名为空字符，以彻底禁用该命令:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> rename-command CONFIG <span class="string">""</span></span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 不过请注意,命令重命名被记录在AOF文件里或传输到集群中可能会导致问题.</span></div></pre></td></tr></table></figure>
<h1 id="7-LIMITS"><a href="#7-LIMITS" class="headerlink" title="7 LIMITS"></a>7 LIMITS</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################## LIMITS ####################################</span></span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 设置同时连接的最大客户端数量. 默认值是 10000 .</span></div><div class="line"><span class="meta">#</span><span class="bash"> 当你无法设置进程文件句柄限制时，redis会设置为当前的文件句柄限制值减去32 (edis会为自身内部处理逻辑留一些句柄出来).</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 如果达到了此限制，redis则会拒绝新的连接请求，</span></div><div class="line"><span class="meta">#</span><span class="bash"> 并且向这些连接请求方发出“max number of clients reached”以作回应.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> maxclients 10000</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 设置redis可以使用的内存大小.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 当内存使用达到上限时,Redis将根据设定的<span class="string">'maxmemory-policy'</span>来移除一些<span class="string">'keys'</span>.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 如果Redis无法根据<span class="string">'maxmemory-policy'</span>来移除数据或<span class="string">'maxmemory-policy'</span>被设置为<span class="string">'noeviction'</span>, </span></div><div class="line"><span class="meta">#</span><span class="bash"> redis会针对那些需要申请内存的指令返回错误信息，比如SET、LPUSH等;</span></div><div class="line"><span class="meta">#</span><span class="bash"> 但是对于无内存申请的指令，仍然会正常响应，比如GET等.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> WARNING: 如果你的redis是主redis（说明你的redis有从redis），</span></div><div class="line"><span class="meta">#</span><span class="bash"> 那么在设置内存使用上限时，需要在系统中留出一些内存空间给同步队列缓存，</span></div><div class="line"><span class="meta">#</span><span class="bash"> 在你设置的是“noeviction”的情况下，不用考虑这个因素.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> maxmemory &lt;bytes&gt;</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> MAXMEMORY POLICY(最大内存策略): 当内存到达最大上限时Redis该如何选择将要被移除的数据</span></div><div class="line"><span class="meta">#</span><span class="bash"> 有如下5种选项:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> volatile-lru -&gt; 使用LRU算法来移除设置了过期时间的key (只针对于设置了过期时间的key)</span></div><div class="line"><span class="meta">#</span><span class="bash"> allkeys-lru -&gt; 使用LRU算法来移除key (针对于所有的key)</span></div><div class="line"><span class="meta">#</span><span class="bash"> volatile-random -&gt; 从设置了过期时间的key中随机选一个移除 (只针对于设置了过期时间的key)</span></div><div class="line"><span class="meta">#</span><span class="bash"> allkeys-random -&gt; 随机选一个key来移除 (针对于所有的key)</span></div><div class="line"><span class="meta">#</span><span class="bash"> volatile-ttl -&gt; 移除最快要过期的key (TTL最小的)</span></div><div class="line"><span class="meta">#</span><span class="bash"> noeviction -&gt; 不移除任何key, 仅仅对写操作返回错误</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Note: with any of the above policies, Redis will <span class="built_in">return</span> an error on write</span></div><div class="line"><span class="meta">#</span><span class="bash">       operations, when there are no suitable keys <span class="keyword">for</span> eviction.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">       At the date of writing these commands are: <span class="built_in">set</span> setnx setex append</span></div><div class="line"><span class="meta">#</span><span class="bash">       incr decr rpush lpush rpushx lpushx linsert lset rpoplpush sadd</span></div><div class="line"><span class="meta">#</span><span class="bash">       sinter sinterstore sunion sunionstore sdiff sdiffstore zadd zincrby</span></div><div class="line"><span class="meta">#</span><span class="bash">       zunionstore zinterstore hset hsetnx hmset hincrby incrby decrby</span></div><div class="line"><span class="meta">#</span><span class="bash">       getset mset msetnx <span class="built_in">exec</span> sort</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 默认配置:</span></div><div class="line"><span class="meta">#</span><span class="bash"> maxmemory-policy noeviction</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> LRU和最小TTL算法都不是精确的算法而是一种估算.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 默认情况下,Redis会从5个key中选一个最近未被使用的key来移除,你可以使用如下指令来设置样本的大小.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 默认的5已经是个足够好的配置了. 10非常接近真正的LRU算法但是需要更多的CPU资源. 3非常快但不怎么准确.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> maxmemory-samples 5</span></div></pre></td></tr></table></figure>
<h1 id="8-APPEND-ONLY-MODE"><a href="#8-APPEND-ONLY-MODE" class="headerlink" title="8 APPEND ONLY MODE"></a>8 APPEND ONLY MODE</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################# APPEND ONLY MODE ###############################</span></span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="string">'Append Only File'</span>是另一个可选的更加稳定的持久化方案. </span></div><div class="line"><span class="meta">#</span><span class="bash"> 在这种情况下,Redis使用默认的<span class="string">'fsync'</span>策略,在服务器断电等情况下可能丢失一秒钟的数据.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> AOF 和 RDB 可以同时启用.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 如果在Redis启动的时候AOF是启用的,Redis将加载AOF文件已保证更准确的数据.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line">appendonly no</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> AOF的文件名. (默认为: <span class="string">"appendonly.aof"</span>)</span></div><div class="line"></div><div class="line">appendfilename "appendonly.aof"</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> fsync()的调用会通知操作系统将数据真正的写入到磁盘而不是在内存缓冲中等待更多的数据.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 有些操作系统会真的将数据写入磁盘,也有些操作系统会尽可能快(ASAP)的写入磁盘.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Redis 支持三种模式:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> no: 不执行fsync, 由操作系统自己将数据写入磁盘. (很快).</span></div><div class="line"><span class="meta">#</span><span class="bash"> always: 每一次写操作都将数据写入磁盘. (慢, 最安全).</span></div><div class="line"><span class="meta">#</span><span class="bash"> everysec: 每秒一次fsync,可能丢失一秒的数据. (折中方案).</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 默认的配置是 <span class="string">"everysec"</span>, 也是稳定性和性能的折中方案.</span></div><div class="line"><span class="meta">#</span><span class="bash"> </span></div><div class="line"><span class="meta">#</span><span class="bash"> appendfsync always</span></div><div class="line">appendfsync everysec</div><div class="line"><span class="meta">#</span><span class="bash"> appendfsync no</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 当AOF的同步策略被设置成always或everysec时,后台用于保存数据或重写AOF文件的进程会占用大量IO.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 在一些Linux系统上,Redis可能会在fsync()调用时阻塞很久.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 为了减缓这个问题的代价,可以使用如下选项在BGSAVE或BGREWRITEAOF进行</span></div><div class="line">no-appendfsync-on-rewrite no</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> 自动重写AOF文件.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 当AOF文件的大小超过了指定的大小的时候Redis会调用BGREWRITEAOF来重写AOF文件.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 工作原理: Redis会记住上次重写时AOF文件的大小(如果还没发生过重写,那么会使用Redis启动时AOF文件的大小).</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> This base size is compared to the current size. If the current size is</span></div><div class="line"><span class="meta">#</span><span class="bash"> bigger than the specified percentage, the rewrite is triggered. </span></div><div class="line"><span class="meta">#</span><span class="bash"> AOF文件大小的增长率大于auto-aof-rewrite-percentage指定的值时,重写操作将被触发.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 同时需要指定一个AOF文件大小的最小值,</span></div><div class="line"><span class="meta">#</span><span class="bash"> 这可以有效地避免在比例已经到了指定的值但是文件体积依然很小的情况下重写AOF文件.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 可以将该值置为0以禁用AOF文件的自动重写.</span></div><div class="line"></div><div class="line"></div><div class="line">auto-aof-rewrite-percentage 100</div><div class="line">auto-aof-rewrite-min-size 64mb</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> An AOF file may be found to be truncated at the end during the Redis</span></div><div class="line"><span class="meta">#</span><span class="bash"> startup process, when the AOF data gets loaded back into memory.</span></div><div class="line"><span class="meta">#</span><span class="bash"> This may happen when the system <span class="built_in">where</span> Redis is running</span></div><div class="line"><span class="meta">#</span><span class="bash"> crashes, especially when an ext4 filesystem is mounted without the</span></div><div class="line"><span class="meta">#</span><span class="bash"> data=ordered option (however this can<span class="string">'t happen when Redis itself</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> crashes or aborts but the operating system still works correctly).</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Redis can either <span class="built_in">exit</span> with an error when this happens, or load as much</span></div><div class="line"><span class="meta">#</span><span class="bash"> data as possible (the default now) and start <span class="keyword">if</span> the AOF file is found</span></div><div class="line"><span class="meta">#</span><span class="bash"> to be truncated at the end. The following option controls this behavior.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> If aof-load-truncated is <span class="built_in">set</span> to yes, a truncated AOF file is loaded and</span></div><div class="line"><span class="meta">#</span><span class="bash"> the Redis server starts emitting a <span class="built_in">log</span> to inform the user of the event.</span></div><div class="line"><span class="meta">#</span><span class="bash"> Otherwise <span class="keyword">if</span> the option is <span class="built_in">set</span> to no, the server aborts with an error</span></div><div class="line"><span class="meta">#</span><span class="bash"> and refuses to start. When the option is <span class="built_in">set</span> to no, the user requires</span></div><div class="line"><span class="meta">#</span><span class="bash"> to fix the AOF file using the <span class="string">"redis-check-aof"</span> utility before to restart</span></div><div class="line"><span class="meta">#</span><span class="bash"> the server.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Note that <span class="keyword">if</span> the AOF file will be found to be corrupted <span class="keyword">in</span> the middle</span></div><div class="line"><span class="meta">#</span><span class="bash"> the server will still <span class="built_in">exit</span> with an error. This option only applies when</span></div><div class="line"><span class="meta">#</span><span class="bash"> Redis will try to <span class="built_in">read</span> more data from the AOF file but not enough bytes</span></div><div class="line"><span class="meta">#</span><span class="bash"> will be found.</span></div><div class="line">aof-load-truncated yes</div></pre></td></tr></table></figure>
<h1 id="9-INCLUDES"><a href="#9-INCLUDES" class="headerlink" title="9 INCLUDES"></a>9 INCLUDES</h1><h1 id="10-LUA-SCRIPTING"><a href="#10-LUA-SCRIPTING" class="headerlink" title="10 LUA SCRIPTING"></a>10 LUA SCRIPTING</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################### LUA SCRIPTING  ###############################</span></span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Max execution time of a Lua script <span class="keyword">in</span> milliseconds.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> If the maximum execution time is reached Redis will <span class="built_in">log</span> that a script is</span></div><div class="line"><span class="meta">#</span><span class="bash"> still <span class="keyword">in</span> execution after the maximum allowed time and will start to</span></div><div class="line"><span class="meta">#</span><span class="bash"> reply to queries with an error.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> When a long running script exceeds the maximum execution time only the</span></div><div class="line"><span class="meta">#</span><span class="bash"> SCRIPT KILL and SHUTDOWN NOSAVE commands are available. The first can be</span></div><div class="line"><span class="meta">#</span><span class="bash"> used to stop a script that did not yet called write commands. The second</span></div><div class="line"><span class="meta">#</span><span class="bash"> is the only way to shut down the server <span class="keyword">in</span> the <span class="keyword">case</span> a write <span class="built_in">command</span> was</span></div><div class="line"><span class="meta">#</span><span class="bash"> already issued by the script but the user doesn<span class="string">'t want to wait for the natural</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> termination of the script.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Set it to 0 or a negative value <span class="keyword">for</span> unlimited execution without warnings.</span></div><div class="line">lua-time-limit 5000</div></pre></td></tr></table></figure>
<h1 id="11-REDIS-CLUSTER"><a href="#11-REDIS-CLUSTER" class="headerlink" title="11 REDIS CLUSTER"></a>11 REDIS CLUSTER</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################### REDIS CLUSTER  ###############################</span></span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span></div><div class="line"><span class="meta">#</span><span class="bash"> WARNING EXPERIMENTAL: Redis Cluster is considered to be stable code, however</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> order to mark it as <span class="string">"mature"</span> we need to <span class="built_in">wait</span> <span class="keyword">for</span> a non trivial percentage</span></div><div class="line"><span class="meta">#</span><span class="bash"> of users to deploy it <span class="keyword">in</span> production.</span></div><div class="line"><span class="meta">#</span><span class="bash"> ++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++++</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Normal Redis instances can<span class="string">'t be part of a Redis Cluster; only nodes that are</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> started as cluster nodes can. In order to start a Redis instance as a</span></div><div class="line"><span class="meta">#</span><span class="bash"> cluster node <span class="built_in">enable</span> the cluster support uncommenting the following:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> cluster-enabled yes</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Every cluster node has a cluster configuration file. This file is not</span></div><div class="line"><span class="meta">#</span><span class="bash"> intended to be edited by hand. It is created and updated by Redis nodes.</span></div><div class="line"><span class="meta">#</span><span class="bash"> Every Redis Cluster node requires a different cluster configuration file.</span></div><div class="line"><span class="meta">#</span><span class="bash"> Make sure that instances running <span class="keyword">in</span> the same system <span class="keyword">do</span> not have</span></div><div class="line"><span class="meta">#</span><span class="bash"> overlapping cluster configuration file names.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> cluster-config-file nodes-6379.conf</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Cluster node timeout is the amount of milliseconds a node must be unreachable</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">for</span> it to be considered <span class="keyword">in</span> failure state.</span></div><div class="line"><span class="meta">#</span><span class="bash"> Most other internal time limits are multiple of the node timeout.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> cluster-node-timeout 15000</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> A slave of a failing master will avoid to start a failover <span class="keyword">if</span> its data</span></div><div class="line"><span class="meta">#</span><span class="bash"> looks too old.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> There is no simple way <span class="keyword">for</span> a slave to actually have a exact measure of</span></div><div class="line"><span class="meta">#</span><span class="bash"> its <span class="string">"data age"</span>, so the following two checks are performed:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 1) If there are multiple slaves able to failover, they exchange messages</span></div><div class="line"><span class="meta">#</span><span class="bash">    <span class="keyword">in</span> order to try to give an advantage to the slave with the best</span></div><div class="line"><span class="meta">#</span><span class="bash">    replication offset (more data from the master processed).</span></div><div class="line"><span class="meta">#</span><span class="bash">    Slaves will try to get their rank by offset, and apply to the start</span></div><div class="line"><span class="meta">#</span><span class="bash">    of the failover a delay proportional to their rank.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> 2) Every single slave computes the time of the last interaction with</span></div><div class="line"><span class="meta">#</span><span class="bash">    its master. This can be the last ping or <span class="built_in">command</span> received (<span class="keyword">if</span> the master</span></div><div class="line"><span class="meta">#</span><span class="bash">    is still <span class="keyword">in</span> the <span class="string">"connected"</span> state), or the time that elapsed since the</span></div><div class="line"><span class="meta">#</span><span class="bash">    disconnection with the master (<span class="keyword">if</span> the replication link is currently down).</span></div><div class="line"><span class="meta">#</span><span class="bash">    If the last interaction is too old, the slave will not try to failover</span></div><div class="line"><span class="meta">#</span><span class="bash">    at all.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> The point <span class="string">"2"</span> can be tuned by user. Specifically a slave will not perform</span></div><div class="line"><span class="meta">#</span><span class="bash"> the failover <span class="keyword">if</span>, since the last interaction with the master, the time</span></div><div class="line"><span class="meta">#</span><span class="bash"> elapsed is greater than:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">   (node-timeout * slave-validity-factor) + repl-ping-slave-period</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> So <span class="keyword">for</span> example <span class="keyword">if</span> node-timeout is 30 seconds, and the slave-validity-factor</span></div><div class="line"><span class="meta">#</span><span class="bash"> is 10, and assuming a default repl-ping-slave-period of 10 seconds, the</span></div><div class="line"><span class="meta">#</span><span class="bash"> slave will not try to failover <span class="keyword">if</span> it was not able to talk with the master</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">for</span> longer than 310 seconds.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> A large slave-validity-factor may allow slaves with too old data to failover</span></div><div class="line"><span class="meta">#</span><span class="bash"> a master, <span class="keyword">while</span> a too small value may prevent the cluster from being able to</span></div><div class="line"><span class="meta">#</span><span class="bash"> elect a slave at all.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> For maximum availability, it is possible to <span class="built_in">set</span> the slave-validity-factor</span></div><div class="line"><span class="meta">#</span><span class="bash"> to a value of 0, <span class="built_in">which</span> means, that slaves will always try to failover the</span></div><div class="line"><span class="meta">#</span><span class="bash"> master regardless of the last time they interacted with the master.</span></div><div class="line"><span class="meta">#</span><span class="bash"> (However they<span class="string">'ll always try to apply a delay proportional to their</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> offset rank).</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Zero is the only value able to guarantee that when all the partitions heal</span></div><div class="line"><span class="meta">#</span><span class="bash"> the cluster will always be able to <span class="built_in">continue</span>.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> cluster-slave-validity-factor 10</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Cluster slaves are able to migrate to orphaned masters, that are masters</span></div><div class="line"><span class="meta">#</span><span class="bash"> that are left without working slaves. This improves the cluster ability</span></div><div class="line"><span class="meta">#</span><span class="bash"> to resist to failures as otherwise an orphaned master can<span class="string">'t be failed over</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> <span class="keyword">case</span> of failure <span class="keyword">if</span> it has no working slaves.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Slaves migrate to orphaned masters only <span class="keyword">if</span> there are still at least a</span></div><div class="line"><span class="meta">#</span><span class="bash"> given number of other working slaves <span class="keyword">for</span> their old master. This number</span></div><div class="line"><span class="meta">#</span><span class="bash"> is the <span class="string">"migration barrier"</span>. A migration barrier of 1 means that a slave</span></div><div class="line"><span class="meta">#</span><span class="bash"> will migrate only <span class="keyword">if</span> there is at least 1 other working slave <span class="keyword">for</span> its master</span></div><div class="line"><span class="meta">#</span><span class="bash"> and so forth. It usually reflects the number of slaves you want <span class="keyword">for</span> every</span></div><div class="line"><span class="meta">#</span><span class="bash"> master <span class="keyword">in</span> your cluster.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Default is 1 (slaves migrate only <span class="keyword">if</span> their masters remain with at least</span></div><div class="line"><span class="meta">#</span><span class="bash"> one slave). To <span class="built_in">disable</span> migration just <span class="built_in">set</span> it to a very large value.</span></div><div class="line"><span class="meta">#</span><span class="bash"> A value of 0 can be <span class="built_in">set</span> but is useful only <span class="keyword">for</span> debugging and dangerous</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> production.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> cluster-migration-barrier 1</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> By default Redis Cluster nodes stop accepting queries <span class="keyword">if</span> they detect there</span></div><div class="line"><span class="meta">#</span><span class="bash"> is at least an <span class="built_in">hash</span> slot uncovered (no available node is serving it).</span></div><div class="line"><span class="meta">#</span><span class="bash"> This way <span class="keyword">if</span> the cluster is partially down (<span class="keyword">for</span> example a range of <span class="built_in">hash</span> slots</span></div><div class="line"><span class="meta">#</span><span class="bash"> are no longer covered) all the cluster becomes, eventually, unavailable.</span></div><div class="line"><span class="meta">#</span><span class="bash"> It automatically returns available as soon as all the slots are covered again.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> However sometimes you want the subset of the cluster <span class="built_in">which</span> is working,</span></div><div class="line"><span class="meta">#</span><span class="bash"> to <span class="built_in">continue</span> to accept queries <span class="keyword">for</span> the part of the key space that is still</span></div><div class="line"><span class="meta">#</span><span class="bash"> covered. In order to <span class="keyword">do</span> so, just <span class="built_in">set</span> the cluster-require-full-coverage</span></div><div class="line"><span class="meta">#</span><span class="bash"> option to no.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> cluster-require-full-coverage yes</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> In order to setup your cluster make sure to <span class="built_in">read</span> the documentation</span></div><div class="line"><span class="meta">#</span><span class="bash"> available at http://redis.io web site.</span></div></pre></td></tr></table></figure>
<h1 id="12-SLOW-LOG"><a href="#12-SLOW-LOG" class="headerlink" title="12 SLOW LOG"></a>12 SLOW LOG</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">################################# SLOW LOG ###################################</span></span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> The Redis Slow Log is a system to <span class="built_in">log</span> queries that exceeded a specified</span></div><div class="line"><span class="meta">#</span><span class="bash"> execution time. The execution time does not include the I/O operations</span></div><div class="line"><span class="meta">#</span><span class="bash"> like talking with the client, sending the reply and so forth,</span></div><div class="line"><span class="meta">#</span><span class="bash"> but just the time needed to actually execute the <span class="built_in">command</span> (this is the only</span></div><div class="line"><span class="meta">#</span><span class="bash"> stage of <span class="built_in">command</span> execution <span class="built_in">where</span> the thread is blocked and can not serve</span></div><div class="line"><span class="meta">#</span><span class="bash"> other requests <span class="keyword">in</span> the meantime).</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> You can configure the slow <span class="built_in">log</span> with two parameters: one tells Redis</span></div><div class="line"><span class="meta">#</span><span class="bash"> what is the execution time, <span class="keyword">in</span> microseconds, to exceed <span class="keyword">in</span> order <span class="keyword">for</span> the</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">command</span> to get logged, and the other parameter is the length of the</span></div><div class="line"><span class="meta">#</span><span class="bash"> slow <span class="built_in">log</span>. When a new <span class="built_in">command</span> is logged the oldest one is removed from the</span></div><div class="line"><span class="meta">#</span><span class="bash"> queue of logged commands.</span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> The following time is expressed <span class="keyword">in</span> microseconds, so 1000000 is equivalent</span></div><div class="line"><span class="meta">#</span><span class="bash"> to one second. Note that a negative number disables the slow <span class="built_in">log</span>, <span class="keyword">while</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> a value of zero forces the logging of every <span class="built_in">command</span>.</span></div><div class="line">slowlog-log-slower-than 10000</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> There is no <span class="built_in">limit</span> to this length. Just be aware that it will consume memory.</span></div><div class="line"><span class="meta">#</span><span class="bash"> You can reclaim memory used by the slow <span class="built_in">log</span> with SLOWLOG RESET.</span></div><div class="line">slowlog-max-len 128</div></pre></td></tr></table></figure>
<h1 id="13-LATENCY-MONITOR"><a href="#13-LATENCY-MONITOR" class="headerlink" title="13 LATENCY MONITOR"></a>13 LATENCY MONITOR</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################### LATENCY MONITOR ##############################</span></span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> The Redis latency monitoring subsystem samples different operations</span></div><div class="line"><span class="meta">#</span><span class="bash"> at runtime <span class="keyword">in</span> order to collect data related to possible sources of</span></div><div class="line"><span class="meta">#</span><span class="bash"> latency of a Redis instance.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Via the LATENCY <span class="built_in">command</span> this information is available to the user that can</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">print</span> graphs and obtain reports.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> The system only logs operations that were performed <span class="keyword">in</span> a time equal or</span></div><div class="line"><span class="meta">#</span><span class="bash"> greater than the amount of milliseconds specified via the</span></div><div class="line"><span class="meta">#</span><span class="bash"> latency-monitor-threshold configuration directive. When its value is <span class="built_in">set</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> to zero, the latency monitor is turned off.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> By default latency monitoring is disabled since it is mostly not needed</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">if</span> you don<span class="string">'t have latency issues, and collecting data has a performance</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> impact, that <span class="keyword">while</span> very small, can be measured under big load. Latency</span></div><div class="line"><span class="meta">#</span><span class="bash"> monitoring can easily be enabled at runtime using the <span class="built_in">command</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="string">"CONFIG SET latency-monitor-threshold &lt;milliseconds&gt;"</span> <span class="keyword">if</span> needed.</span></div><div class="line">latency-monitor-threshold 0</div></pre></td></tr></table></figure>
<h1 id="14-EVENT-NOTIFICATION"><a href="#14-EVENT-NOTIFICATION" class="headerlink" title="14 EVENT NOTIFICATION"></a>14 EVENT NOTIFICATION</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################ EVENT NOTIFICATION ##############################</span></span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Redis can notify Pub/Sub clients about events happening <span class="keyword">in</span> the key space.</span></div><div class="line"><span class="meta">#</span><span class="bash"> This feature is documented at http://redis.io/topics/notifications</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> For instance <span class="keyword">if</span> keyspace events notification is enabled, and a client</span></div><div class="line"><span class="meta">#</span><span class="bash"> performs a DEL operation on key <span class="string">"foo"</span> stored <span class="keyword">in</span> the Database 0, two</span></div><div class="line"><span class="meta">#</span><span class="bash"> messages will be published via Pub/Sub:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> PUBLISH __keyspace@0__:foo del</span></div><div class="line"><span class="meta">#</span><span class="bash"> PUBLISH __keyevent@0__:del foo</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> It is possible to select the events that Redis will notify among a <span class="built_in">set</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> of classes. Every class is identified by a single character:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">  K     Keyspace events, published with __keyspace@&lt;db&gt;__ prefix.</span></div><div class="line"><span class="meta">#</span><span class="bash">  E     Keyevent events, published with __keyevent@&lt;db&gt;__ prefix.</span></div><div class="line"><span class="meta">#</span><span class="bash">  g     Generic commands (non-type specific) like DEL, EXPIRE, RENAME, ...</span></div><div class="line"><span class="meta">#</span><span class="bash">  $     String commands</span></div><div class="line"><span class="meta">#</span><span class="bash">  l     List commands</span></div><div class="line"><span class="meta">#</span><span class="bash">  s     Set commands</span></div><div class="line"><span class="meta">#</span><span class="bash">  h     Hash commands</span></div><div class="line"><span class="meta">#</span><span class="bash">  z     Sorted <span class="built_in">set</span> commands</span></div><div class="line"><span class="meta">#</span><span class="bash">  x     Expired events (events generated every time a key expires)</span></div><div class="line"><span class="meta">#</span><span class="bash">  e     Evicted events (events generated when a key is evicted <span class="keyword">for</span> maxmemory)</span></div><div class="line"><span class="meta">#</span><span class="bash">  A     Alias <span class="keyword">for</span> g<span class="variable">$lshzxe</span>, so that the <span class="string">"AKE"</span> string means all the events.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">  The <span class="string">"notify-keyspace-events"</span> takes as argument a string that is composed</span></div><div class="line"><span class="meta">#</span><span class="bash">  of zero or multiple characters. The empty string means that notifications</span></div><div class="line"><span class="meta">#</span><span class="bash">  are disabled.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">  Example: to <span class="built_in">enable</span> list and generic events, from the point of view of the</span></div><div class="line"><span class="meta">#</span><span class="bash">           event name, use:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">  notify-keyspace-events Elg</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">  Example 2: to get the stream of the expired keys subscribing to channel</span></div><div class="line"><span class="meta">#</span><span class="bash">             name __keyevent@0__:expired use:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">  notify-keyspace-events Ex</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash">  By default all notifications are disabled because most users don<span class="string">'t need</span></span></div><div class="line"><span class="meta">#</span><span class="bash">  this feature and the feature has some overhead. Note that <span class="keyword">if</span> you don<span class="string">'t</span></span></div><div class="line"><span class="meta">#</span><span class="bash">  specify at least one of K or E, no events will be delivered.</span></div><div class="line">notify-keyspace-events ""</div></pre></td></tr></table></figure>
<h1 id="15-ADVANCED-CONFIG"><a href="#15-ADVANCED-CONFIG" class="headerlink" title="15 ADVANCED CONFIG"></a>15 ADVANCED CONFIG</h1><figure class="highlight shell"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div><div class="line">57</div><div class="line">58</div><div class="line">59</div><div class="line">60</div><div class="line">61</div><div class="line">62</div><div class="line">63</div><div class="line">64</div><div class="line">65</div><div class="line">66</div><div class="line">67</div><div class="line">68</div><div class="line">69</div><div class="line">70</div><div class="line">71</div><div class="line">72</div><div class="line">73</div><div class="line">74</div><div class="line">75</div><div class="line">76</div><div class="line">77</div><div class="line">78</div><div class="line">79</div><div class="line">80</div><div class="line">81</div><div class="line">82</div><div class="line">83</div><div class="line">84</div><div class="line">85</div><div class="line">86</div><div class="line">87</div><div class="line">88</div><div class="line">89</div><div class="line">90</div><div class="line">91</div><div class="line">92</div><div class="line">93</div><div class="line">94</div><div class="line">95</div><div class="line">96</div><div class="line">97</div><div class="line">98</div><div class="line">99</div><div class="line">100</div><div class="line">101</div><div class="line">102</div><div class="line">103</div><div class="line">104</div><div class="line">105</div><div class="line">106</div><div class="line">107</div><div class="line">108</div><div class="line">109</div><div class="line">110</div><div class="line">111</div><div class="line">112</div><div class="line">113</div><div class="line">114</div><div class="line">115</div><div class="line">116</div><div class="line">117</div><div class="line">118</div><div class="line">119</div><div class="line">120</div><div class="line">121</div><div class="line">122</div><div class="line">123</div><div class="line">124</div><div class="line">125</div><div class="line">126</div><div class="line">127</div><div class="line">128</div><div class="line">129</div><div class="line">130</div><div class="line">131</div><div class="line">132</div><div class="line">133</div><div class="line">134</div><div class="line">135</div><div class="line">136</div><div class="line">137</div><div class="line">138</div><div class="line">139</div><div class="line">140</div><div class="line">141</div><div class="line">142</div><div class="line">143</div><div class="line">144</div><div class="line">145</div></pre></td><td class="code"><pre><div class="line"><span class="meta">#</span><span class="bash"><span class="comment">############################## ADVANCED CONFIG ###############################</span></span></div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Hashes are encoded using a memory efficient data structure when they have a</span></div><div class="line"><span class="meta">#</span><span class="bash"> small number of entries, and the biggest entry does not exceed a given</span></div><div class="line"><span class="meta">#</span><span class="bash"> threshold. These thresholds can be configured using the following directives.</span></div><div class="line">hash-max-ziplist-entries 512</div><div class="line">hash-max-ziplist-value 64</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Lists are also encoded <span class="keyword">in</span> a special way to save a lot of space.</span></div><div class="line"><span class="meta">#</span><span class="bash"> The number of entries allowed per internal list node can be specified</span></div><div class="line"><span class="meta">#</span><span class="bash"> as a fixed maximum size or a maximum number of elements.</span></div><div class="line"><span class="meta">#</span><span class="bash"> For a fixed maximum size, use -5 through -1, meaning:</span></div><div class="line"><span class="meta">#</span><span class="bash"> -5: max size: 64 Kb  &lt;-- not recommended <span class="keyword">for</span> normal workloads</span></div><div class="line"><span class="meta">#</span><span class="bash"> -4: max size: 32 Kb  &lt;-- not recommended</span></div><div class="line"><span class="meta">#</span><span class="bash"> -3: max size: 16 Kb  &lt;-- probably not recommended</span></div><div class="line"><span class="meta">#</span><span class="bash"> -2: max size: 8 Kb   &lt;-- good</span></div><div class="line"><span class="meta">#</span><span class="bash"> -1: max size: 4 Kb   &lt;-- good</span></div><div class="line"><span class="meta">#</span><span class="bash"> Positive numbers mean store up to _exactly_ that number of elements</span></div><div class="line"><span class="meta">#</span><span class="bash"> per list node.</span></div><div class="line"><span class="meta">#</span><span class="bash"> The highest performing option is usually -2 (8 Kb size) or -1 (4 Kb size),</span></div><div class="line"><span class="meta">#</span><span class="bash"> but <span class="keyword">if</span> your use <span class="keyword">case</span> is unique, adjust the settings as necessary.</span></div><div class="line">list-max-ziplist-size -2</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Lists may also be compressed.</span></div><div class="line"><span class="meta">#</span><span class="bash"> Compress depth is the number of quicklist ziplist nodes from *each* side of</span></div><div class="line"><span class="meta">#</span><span class="bash"> the list to *exclude* from compression.  The head and tail of the list</span></div><div class="line"><span class="meta">#</span><span class="bash"> are always uncompressed <span class="keyword">for</span> fast push/pop operations.  Settings are:</span></div><div class="line"><span class="meta">#</span><span class="bash"> 0: <span class="built_in">disable</span> all list compression</span></div><div class="line"><span class="meta">#</span><span class="bash"> 1: depth 1 means <span class="string">"don't start compressing until after 1 node into the list,</span></span></div><div class="line"><span class="meta">#</span><span class="bash">    going from either the head or tail<span class="string">"</span></span></div><div class="line"><span class="meta">#</span><span class="bash">    So: [head]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[tail]</span></div><div class="line"><span class="meta">#</span><span class="bash">    [head], [tail] will always be uncompressed; inner nodes will compress.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 2: [head]-&gt;[next]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[prev]-&gt;[tail]</span></div><div class="line"><span class="meta">#</span><span class="bash">    2 here means: don<span class="string">'t compress head or head-&gt;next or tail-&gt;prev or tail,</span></span></div><div class="line"><span class="meta">#</span><span class="bash">    but compress all nodes between them.</span></div><div class="line"><span class="meta">#</span><span class="bash"> 3: [head]-&gt;[next]-&gt;[next]-&gt;node-&gt;node-&gt;...-&gt;node-&gt;[prev]-&gt;[prev]-&gt;[tail]</span></div><div class="line"><span class="meta">#</span><span class="bash"> etc.</span></div><div class="line">list-compress-depth 0</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Sets have a special encoding <span class="keyword">in</span> just one <span class="keyword">case</span>: when a <span class="built_in">set</span> is composed</span></div><div class="line"><span class="meta">#</span><span class="bash"> of just strings that happen to be integers <span class="keyword">in</span> radix 10 <span class="keyword">in</span> the range</span></div><div class="line"><span class="meta">#</span><span class="bash"> of 64 bit signed integers.</span></div><div class="line"><span class="meta">#</span><span class="bash"> The following configuration setting sets the <span class="built_in">limit</span> <span class="keyword">in</span> the size of the</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">set</span> <span class="keyword">in</span> order to use this special memory saving encoding.</span></div><div class="line">set-max-intset-entries 512</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Similarly to hashes and lists, sorted sets are also specially encoded <span class="keyword">in</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> order to save a lot of space. This encoding is only used when the length and</span></div><div class="line"><span class="meta">#</span><span class="bash"> elements of a sorted <span class="built_in">set</span> are below the following limits:</span></div><div class="line">zset-max-ziplist-entries 128</div><div class="line">zset-max-ziplist-value 64</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> HyperLogLog sparse representation bytes <span class="built_in">limit</span>. The <span class="built_in">limit</span> includes the</span></div><div class="line"><span class="meta">#</span><span class="bash"> 16 bytes header. When an HyperLogLog using the sparse representation crosses</span></div><div class="line"><span class="meta">#</span><span class="bash"> this <span class="built_in">limit</span>, it is converted into the dense representation.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> A value greater than 16000 is totally useless, since at that point the</span></div><div class="line"><span class="meta">#</span><span class="bash"> dense representation is more memory efficient.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> The suggested value is ~ 3000 <span class="keyword">in</span> order to have the benefits of</span></div><div class="line"><span class="meta">#</span><span class="bash"> the space efficient encoding without slowing down too much PFADD,</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="built_in">which</span> is O(N) with the sparse encoding. The value can be raised to</span></div><div class="line"><span class="meta">#</span><span class="bash"> ~ 10000 when CPU is not a concern, but space is, and the data <span class="built_in">set</span> is</span></div><div class="line"><span class="meta">#</span><span class="bash"> composed of many HyperLogLogs with cardinality <span class="keyword">in</span> the 0 - 15000 range.</span></div><div class="line">hll-sparse-max-bytes 3000</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Active rehashing uses 1 millisecond every 100 milliseconds of CPU time <span class="keyword">in</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> order to <span class="built_in">help</span> rehashing the main Redis <span class="built_in">hash</span> table (the one mapping top-level</span></div><div class="line"><span class="meta">#</span><span class="bash"> keys to values). The <span class="built_in">hash</span> table implementation Redis uses (see dict.c)</span></div><div class="line"><span class="meta">#</span><span class="bash"> performs a lazy rehashing: the more operation you run into a <span class="built_in">hash</span> table</span></div><div class="line"><span class="meta">#</span><span class="bash"> that is rehashing, the more rehashing <span class="string">"steps"</span> are performed, so <span class="keyword">if</span> the</span></div><div class="line"><span class="meta">#</span><span class="bash"> server is idle the rehashing is never complete and some more memory is used</span></div><div class="line"><span class="meta">#</span><span class="bash"> by the <span class="built_in">hash</span> table.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> The default is to use this millisecond 10 <span class="built_in">times</span> every second <span class="keyword">in</span> order to</span></div><div class="line"><span class="meta">#</span><span class="bash"> actively <span class="built_in">rehash</span> the main dictionaries, freeing memory when possible.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> If unsure:</span></div><div class="line"><span class="meta">#</span><span class="bash"> use <span class="string">"activerehashing no"</span> <span class="keyword">if</span> you have hard latency requirements and it is</span></div><div class="line"><span class="meta">#</span><span class="bash"> not a good thing <span class="keyword">in</span> your environment that Redis can reply from time to time</span></div><div class="line"><span class="meta">#</span><span class="bash"> to queries with 2 milliseconds delay.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> use <span class="string">"activerehashing yes"</span> <span class="keyword">if</span> you don<span class="string">'t have such hard requirements but</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> want to free memory asap when possible.</span></div><div class="line">activerehashing yes</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> The client output buffer limits can be used to force disconnection of clients</span></div><div class="line"><span class="meta">#</span><span class="bash"> that are not reading data from the server fast enough <span class="keyword">for</span> some reason (a</span></div><div class="line"><span class="meta">#</span><span class="bash"> common reason is that a Pub/Sub client can<span class="string">'t consume messages as fast as the</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> publisher can produce them).</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> The <span class="built_in">limit</span> can be <span class="built_in">set</span> differently <span class="keyword">for</span> the three different classes of clients:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> normal -&gt; normal clients including MONITOR clients</span></div><div class="line"><span class="meta">#</span><span class="bash"> slave  -&gt; slave clients</span></div><div class="line"><span class="meta">#</span><span class="bash"> pubsub -&gt; clients subscribed to at least one pubsub channel or pattern</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> The syntax of every client-output-buffer-limit directive is the following:</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> client-output-buffer-limit &lt;class&gt; &lt;hard <span class="built_in">limit</span>&gt; &lt;soft <span class="built_in">limit</span>&gt; &lt;soft seconds&gt;</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> A client is immediately disconnected once the hard <span class="built_in">limit</span> is reached, or <span class="keyword">if</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> the soft <span class="built_in">limit</span> is reached and remains reached <span class="keyword">for</span> the specified number of</span></div><div class="line"><span class="meta">#</span><span class="bash"> seconds (continuously).</span></div><div class="line"><span class="meta">#</span><span class="bash"> So <span class="keyword">for</span> instance <span class="keyword">if</span> the hard <span class="built_in">limit</span> is 32 megabytes and the soft <span class="built_in">limit</span> is</span></div><div class="line"><span class="meta">#</span><span class="bash"> 16 megabytes / 10 seconds, the client will get disconnected immediately</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">if</span> the size of the output buffers reach 32 megabytes, but will also get</span></div><div class="line"><span class="meta">#</span><span class="bash"> disconnected <span class="keyword">if</span> the client reaches 16 megabytes and continuously overcomes</span></div><div class="line"><span class="meta">#</span><span class="bash"> the <span class="built_in">limit</span> <span class="keyword">for</span> 10 seconds.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> By default normal clients are not limited because they don<span class="string">'t receive data</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> without asking (<span class="keyword">in</span> a push way), but just after a request, so only</span></div><div class="line"><span class="meta">#</span><span class="bash"> asynchronous clients may create a scenario <span class="built_in">where</span> data is requested faster</span></div><div class="line"><span class="meta">#</span><span class="bash"> than it can <span class="built_in">read</span>.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Instead there is a default <span class="built_in">limit</span> <span class="keyword">for</span> pubsub and slave clients, since</span></div><div class="line"><span class="meta">#</span><span class="bash"> subscribers and slaves receive data <span class="keyword">in</span> a push fashion.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Both the hard or the soft <span class="built_in">limit</span> can be disabled by setting them to zero.</span></div><div class="line">client-output-buffer-limit normal 0 0 0</div><div class="line">client-output-buffer-limit slave 256mb 64mb 60</div><div class="line">client-output-buffer-limit pubsub 32mb 8mb 60</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> Redis calls an internal <span class="keyword">function</span> to perform many background tasks, like</span></div><div class="line"><span class="meta">#</span><span class="bash"> closing connections of clients <span class="keyword">in</span> timeout, purging expired keys that are</span></div><div class="line"><span class="meta">#</span><span class="bash"> never requested, and so forth.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> Not all tasks are performed with the same frequency, but Redis checks <span class="keyword">for</span></span></div><div class="line"><span class="meta">#</span><span class="bash"> tasks to perform according to the specified <span class="string">"hz"</span> value.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> By default <span class="string">"hz"</span> is <span class="built_in">set</span> to 10. Raising the value will use more CPU when</span></div><div class="line"><span class="meta">#</span><span class="bash"> Redis is idle, but at the same time will make Redis more responsive when</span></div><div class="line"><span class="meta">#</span><span class="bash"> there are many keys expiring at the same time, and timeouts may be</span></div><div class="line"><span class="meta">#</span><span class="bash"> handled with more precision.</span></div><div class="line"><span class="meta">#</span><span class="bash"></span></div><div class="line"><span class="meta">#</span><span class="bash"> The range is between 1 and 500, however a value over 100 is usually not</span></div><div class="line"><span class="meta">#</span><span class="bash"> a good idea. Most users should use the default of 10 and raise this up to</span></div><div class="line"><span class="meta">#</span><span class="bash"> 100 only <span class="keyword">in</span> environments <span class="built_in">where</span> very low latency is required.</span></div><div class="line">hz 10</div><div class="line"></div><div class="line"><span class="meta">#</span><span class="bash"> When a child rewrites the AOF file, <span class="keyword">if</span> the following option is enabled</span></div><div class="line"><span class="meta">#</span><span class="bash"> the file will be fsync-ed every 32 MB of data generated. This is useful</span></div><div class="line"><span class="meta">#</span><span class="bash"> <span class="keyword">in</span> order to commit the file to the disk more incrementally and avoid</span></div><div class="line"><span class="meta">#</span><span class="bash"> big latency spikes.</span></div><div class="line">aof-rewrite-incremental-fsync yes</div></pre></td></tr></table></figure>
</div><script type="text/javascript" src="/js/share.js?v=0.0.0" async></script><a data-url="http://yoursite.com/2017/03/26/redis-04-配置文件/" data-id="cj7ujy0bh006h2i75wbn9fxuh" data-qrcode="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMYAAADGCAAAAACs8KCBAAACNklEQVR42u3aMXLDMAwFUd//0kqbhvR+gMmMwGXlsRWJTwUCAvh88Hp+LfLr6pv93fZPObBkyJDxWsazXftrCGZ1h/0e+N5kyJBxD2MVwVbXdNgEzPcmQ4YMGftraglijSdDhgwZnBGka9tgXftVhgwZNzNIKEwfQ0IqD9nHzuIyZMh4IYNX3f//85/0N2TIkPEqxhOu9D5kWzy8Lp8iQ4aM0YxaKS1tZHYCdzD8IUOGjNGMNClMS/988IK/lGL6KEOGjNcySDmMbKjW4Exf0BIjQ4aM0Qwe7MiNOrB9OC72Y2XIkDGOwRM1Hhw7QTwexZAhQ8ZQRpqupYfSfqKJTt4yZMgYzSB/wL/vbCJtNizvLEOGjEEM3oxMS/n9BkBwvQwZMi5g8OCYhtd9mO5s/cu0iAwZMkYzanklGblID8PB65MhQ8ZoRlq/ImW1tLjGD8nHynAyZMh4FaMzbEqu5Hge7pf/N2TIkHENo4ZJk8vidlc7kSFDxmhGGvhqE2e1MbJ0DzJkyLiHUTtwpm3LTiHvQJ4rQ4aMQQz+eFIm4yMdxZaqDBkyLmCkRfnOoZQMivEXJEOGjNmMJ1ydgysKmjWqDBkyRjNqwxZkKyStTAP94ZkRGTJkvIrBByPS0liteVkMuDJkyLiAUTvEkiGMWpMg3a0MGTJk8HQtzUDTgbBjAVeGDBmjGTXYqZLclwFWGTJkjGaQQ2ytYcAH7jvFOxkyZMxmpEfHtD3AS2lpW1SGDBkXMH4AcAjk89k1Bg0AAAAASUVORK5CYII=" class="article-share-link">分享</a><div class="tags"><a href="/tags/redis/">redis</a></div><div class="post-nav"><a href="/2017/03/27/redis-05-持久化/" class="pre">redis-05-持久化</a><a href="/2017/03/25/redis-03-数据类型/" class="next">redis-03-数据类型</a></div><div id="disqus_thread"><div class="btn_click_load"><button class="disqus_click_btn">阅读评论 「请确保 disqus.com 可以正常加载」</button></div><script>var disqus_shortname = 'hylexus';
var disqus_identifier = '2017/03/26/redis-04-配置文件/';
var disqus_title = 'redis-04-配置文件';
var disqus_url = 'http://yoursite.com/2017/03/26/redis-04-配置文件/';
$('.btn_click_load').click(function() {
  (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
  $('.btn_click_load').css('display','none');
});
$.ajax({
  url: 'https://disqus.com/next/config.json',
  timeout: 3000,
  type: 'GET',
  success: (function() {
    var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    $('.btn_click_load').css('display','none');
  })(),
  error: function() {
    $('.btn_click_load').css('display','block');
  }
});</script><script id="dsq-count-scr" src="//hylexus.disqus.com/count.js" async></script></div></div></div></div><div class="pure-u-1 pure-u-md-1-4"><div id="sidebar"><div class="widget"><div class="widget-title"><i class="fa fa-folder-o"> 分类</i></div><ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/99-problems-in-scala/">99-problems-in-scala</a><span class="category-list-count">9</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JVM/">JVM</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/Java-多线程/">Java-多线程</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/JavaSE/">JavaSE</a><span class="category-list-count">7</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/LeetCode/">LeetCode</a><span class="category-list-count">13</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/NIO/">NIO</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/app-server/">app-server</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/docker/">docker</a><span class="category-list-count">6</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/git/">git</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/http-server/">http-server</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/kafka/">kafka</a><span class="category-list-count">4</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/linux/">linux</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/logging/">logging</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/maven/">maven</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/mysql/">mysql</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/other/">other</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/redis/">redis</a><span class="category-list-count">10</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/scala/">scala</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spark/">spark</a><span class="category-list-count">2</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/spring-cloud/">spring-cloud</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/zookeeper/">zookeeper</a><span class="category-list-count">5</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/安全/">安全</a><span class="category-list-count">3</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/排序/">排序</a><span class="category-list-count">2</span></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-star-o"> 标签</i></div><div class="tagcloud"><a href="/tags/kafka/" style="font-size: 15px;">kafka</a> <a href="/tags/JVM/" style="font-size: 15px;">JVM</a> <a href="/tags/NIO/" style="font-size: 15px;">NIO</a> <a href="/tags/LeetCode/" style="font-size: 15px;">LeetCode</a> <a href="/tags/安全/" style="font-size: 15px;">安全</a> <a href="/tags/docker/" style="font-size: 15px;">docker</a> <a href="/tags/git/" style="font-size: 15px;">git</a> <a href="/tags/apache-httpd/" style="font-size: 15px;">apache/httpd</a> <a href="/tags/lambda/" style="font-size: 15px;">lambda</a> <a href="/tags/bit/" style="font-size: 15px;">bit</a> <a href="/tags/keytool/" style="font-size: 15px;">keytool</a> <a href="/tags/非对称加密/" style="font-size: 15px;">非对称加密</a> <a href="/tags/jt-808/" style="font-size: 15px;">jt-808</a> <a href="/tags/mysql/" style="font-size: 15px;">mysql</a> <a href="/tags/linux/" style="font-size: 15px;">linux</a> <a href="/tags/logging/" style="font-size: 15px;">logging</a> <a href="/tags/scala/" style="font-size: 15px;">scala</a> <a href="/tags/redis/" style="font-size: 15px;">redis</a> <a href="/tags/spark/" style="font-size: 15px;">spark</a> <a href="/tags/spring-cloud/" style="font-size: 15px;">spring-cloud</a> <a href="/tags/ssh/" style="font-size: 15px;">ssh</a> <a href="/tags/tomcat/" style="font-size: 15px;">tomcat</a> <a href="/tags/zookeeper/" style="font-size: 15px;">zookeeper</a> <a href="/tags/maven/" style="font-size: 15px;">maven</a> <a href="/tags/排序/" style="font-size: 15px;">排序</a></div></div><div class="widget"><div class="widget-title"><i class="fa fa-file-o"> 最近文章</i></div><ul class="post-list"><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/java多线程-01-基本概念/">java多线程-01-基本概念</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/排序算法-02-插入排序/">排序算法-02-插入排序</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/常见加密类型及通信安全/">常见加密类型及通信安全</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/docker筑基篇-00-docker简介/">docker筑基篇-00-docker简介</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/git-01-简介、安装和配置/">git-01-简介、安装和配置</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/git-02-基本操作/">git-02-基本操作</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/shiro-常用filter/">shiro-常用filter</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/problem01-05/">problem01-05</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/java秘钥、证书管理工具-keytool/">java秘钥、证书管理工具-keytool</a></li><li class="post-list-item"><a class="post-list-link" href="/2017/09/14/SSL、openSSL、CA/">SSL、openSSL、CA</a></li></ul></div><div class="widget"><div class="widget-title"><i class="fa fa-comment-o"> 最近评论</i></div><script type="text/javascript" src="//hylexus.disqus.com/recent_comments_widget.js?num_items=5&amp;hide_avatars=1&amp;avatar_size=32&amp;excerpt_length=20&amp;hide_mods=1"></script></div><div class="widget"><div class="widget-title"><i class="fa fa-external-link"> 友情链接</i></div><ul></ul><a href="http://blog.csdn.net/hylexus" title="我的CSDN" target="_blank">我的CSDN</a><ul></ul><a href="https://segmentfault.com/u/hylexus" title="我的segmentfault" target="_blank">我的segmentfault</a><ul></ul><a href="http://www.jianshu.com/u/4f83555879f6" title="我的简书" target="_blank">我的简书</a></div></div></div><div class="pure-u-1 pure-u-md-3-4"><div id="footer">Copyright © 2017 <a href="/." rel="nofollow">宛丘.</a> Powered by<a rel="nofollow" target="_blank" href="https://hexo.io"> Hexo.</a><a rel="nofollow" target="_blank" href="https://github.com/tufu9441/maupassant-hexo"> Theme</a> by<a rel="nofollow" target="_blank" href="https://github.com/pagecho"> Cho.</a></div></div></div><a id="rocket" href="#top" class="show"></a><script type="text/javascript" src="/js/totop.js?v=0.0.0" async></script><script type="text/javascript" src="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.js" async></script><script type="text/javascript" src="/js/fancybox.js?v=0.0.0" async></script><link rel="stylesheet" type="text/css" href="//cdn.bootcss.com/fancybox/3.1.20/jquery.fancybox.min.css"><script type="text/javascript" src="/js/codeblock-resizer.js?v=0.0.0"></script><script type="text/javascript" src="/js/smartresize.js?v=0.0.0"></script></div></body></html>